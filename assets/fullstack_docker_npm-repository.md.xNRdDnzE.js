import{_ as l,c as e,J as s,V as o,o as c,G as n}from"./chunks/framework.SV1ROkXV.js";const C=JSON.parse('{"title":"使用Docker搭建npm仓库","description":"使用Docker搭建属于自己的npm私有仓库的完整教程","frontmatter":{"title":"使用Docker搭建npm仓库","description":"使用Docker搭建属于自己的npm私有仓库的完整教程","keywords":"npm私有仓库,搭建npm仓库,docker搭建npm仓库","logo":"https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/icon-npm.png"},"headers":[],"relativePath":"fullstack/docker/npm-repository.md","filePath":"fullstack/docker/npm-repository.md","lastUpdated":1709440279000}'),r={name:"fullstack/docker/npm-repository.md"},t=o(`<h1 id="使用docker搭建npm仓库" tabindex="-1">使用Docker搭建npm仓库 <a class="header-anchor" href="#使用docker搭建npm仓库" aria-label="Permalink to &quot;使用Docker搭建npm仓库&quot;">​</a></h1><p>在公司团队内一般都会拥有私有的工具包或者其他依赖，这些东西又是比较敏感的信息，因此如npm私库的搭建在公司内部必不可少。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>私库搭建方式有很多，本篇通过<code>docker+nexus3</code>的进行搭建。 本人使用ARM架构Centos7.9虚拟机环境进行搭建，请你阅前了解</p></div><h2 id="安装docker" tabindex="-1">安装docker <a class="header-anchor" href="#安装docker" aria-label="Permalink to &quot;安装docker&quot;">​</a></h2><p>docker安装步骤可以参考本人的 <a href="/fullstack/docker/install-configure.html">docker安装一文</a></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> yum remove docker </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  docker-client </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  docker-client-latest </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  docker-common </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  docker-latest </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  docker-latest-logrotate </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  docker-logrotate </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  docker-engine</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> yum install -y yum-utils</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> yum-config-manager </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">    --add-repo</span><span style="color:#C3E88D;"> https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看可安装的docker版本</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> yum list docker-ce --showduplicates </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> sort</span><span style="color:#C3E88D;"> -r</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动docker</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#C3E88D;"> systemctl start docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="安装nexus3" tabindex="-1">安装nexus3 <a class="header-anchor" href="#安装nexus3" aria-label="Permalink to &quot;安装nexus3&quot;">​</a></h2><ol><li><p>这里采用宿主机卷映射，先创建nexus配置卷</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> /srv/nexus</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 授权</span></span>
<span class="line"><span style="color:#FFCB6B;">chown</span><span style="color:#C3E88D;"> -R</span><span style="color:#F78C6C;"> 200</span><span style="color:#C3E88D;"> /srv/nexus</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>下载镜像并运行</p><p>这里本人是在arm架构的Centos上安装的，需要支持arm架构的nexus镜像，由于官方镜像没有提供支持arm架构的镜像，这里选择了别人编译好的支持<a href="https://hub.docker.com/r/klo2k/nexus3" target="_blank" rel="noreferrer">arm架构的镜像</a>，你可以选择非arm架构的<a href="https://hub.docker.com/search?q=nexus3" target="_blank" rel="noreferrer">官方镜像</a></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 启动nexus3容器，会从远程拉取镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> pull klo2k/nexus3 # arm架构</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 运行容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> run -d --name nexus3 --restart=always </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">    -p</span><span style="color:#F78C6C;"> 8081</span><span style="color:#C3E88D;">:8081 </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">    -p</span><span style="color:#F78C6C;"> 8000</span><span style="color:#C3E88D;">-8010:8000-8010 </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">    -v</span><span style="color:#C3E88D;"> /srv/nexus:/nexus-data </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">    klo2k/nexus3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>nexus内部默认会使用<code>8001</code>作为http访问的端口，把它映射到主机上，然后再暴露一个端口范围供后续其他使用</p></li><li><p>运行后根据机器配置一般需要等待一段时间，你可以查看其运行日志：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> logs -f nexus3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h2 id="初始密码" tabindex="-1">初始密码 <a class="header-anchor" href="#初始密码" aria-label="Permalink to &quot;初始密码&quot;">​</a></h2><p>nexus的默认账户为<code>admin</code>，初始密码在容器内<code>/nexus-data/admin.password</code>文件中，如果你进行了卷挂载也可以在宿主机卷中查看</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 进入容器查看admin密码</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> exec nexus3 cat /nexus-data/admin.password</span></span>
<span class="line"><span style="color:#FFCB6B;">b75981d3-affe-45f1-ba6f-10046b8bc4b9</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 挂载了数据卷可以进行本地查看</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#C3E88D;"> /srv/nexus/admin.password</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="访问nexus3" tabindex="-1">访问nexus3 <a class="header-anchor" href="#访问nexus3" aria-label="Permalink to &quot;访问nexus3&quot;">​</a></h2><p>访问地址为<code>YourIP:PORT</code>如localhost:8081，用初始账号密码进行登录，<em>admin/xxxxx</em> ，初次进入后可以修改密码</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/nexus1.png" alt="nexus1"></p><p>基本面板左侧可以查找对应的仓库包文件，Brower菜单进入可以看到对应的仓库</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320162008106.png" alt="image-20230320162008106"></p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320162051975.png" alt="image-20230320162051975"></p><p>上面的设置按钮需要有权限才可以看到，当前admin用户，可以看到，你也可以创建其他用户并分配适当的权限，所有的仓库储存、角色权限等操作都在设置面板里配置。</p><p>通常我们只需要关注下图红框中的配置即可</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320162812212.png" alt="image-20230320162812212"></p><h2 id="创建存储集" tabindex="-1">创建存储集 <a class="header-anchor" href="#创建存储集" aria-label="Permalink to &quot;创建存储集&quot;">​</a></h2><p>创建数据存储单元集用来存放数据，你可以将Blob store理解为存储文件的地方，repository相当于数据库用来映射文件路径。</p><p>为什么要创建Blob Store呢？当你创建了某个blobstore就会某个关联的repository的内容存储到这里，你可以创建多个blobstore关联多个repository，这样就防止了数据的污染。</p><p>点击左侧菜单Blob Stores ，然后点击右侧 Create Blob Store 按钮</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320163655564.png" alt="image-20230320163655564"></p><p>然后创建页面先选择数据类型，这里选择 File 类型，然后给数据存储单元命名，最好语义明确如：npm，方便以后查看，都填写后点击保存按钮即可，列表中就会看到刚刚创建的存储单元集合</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320163718336.png" alt="image-20230320163718336"></p><h2 id="创建仓库" tabindex="-1">创建仓库 <a class="header-anchor" href="#创建仓库" aria-label="Permalink to &quot;创建仓库&quot;">​</a></h2><p>创建仓库关联存储集，点击左侧菜单Repositories ，然后点击右侧 Create Repository 按钮</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320163852830.png" alt="image-20230320163852830"></p><p>然后选择<code>npm(hosted)</code>，这里你会看到有hosted、proxy、group三类npm仓库，三者区别后面会讲。</p><p>进入创建仓库配置页面，如下，需要填写仓库名称、存储集、发布策略</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320164334735.png" alt="image-20230320164334735"></p><p>注意以下几点：</p><ul><li>同一类型的仓库名需要唯一，防止和旧的仓库重名</li><li>储存集选择你前面创建的存储集，如npm</li><li>发布策略中包含集中策略：根据你的需求设置，这里选择允许重发 <ul><li>允许重发</li><li>禁止重发</li><li>只读</li><li>通过复制发布（不推荐） <blockquote><p>来自官方的解释：If you are using <a href="https://help.sonatype.com/repomanager3/nexus-repository-administration/repository-management/repository-replication-(legacy)" target="_blank" rel="noreferrer">replication</a>, this policy is automatically set to <em>Deploy by Replication Only.</em> This will block all deployment to the hosted repository except by the internal replication mechanism. You should not manually set this policy to <em>Deploy by Replication Only</em>. If you disable replication, Nexus Repository automatically restores your previous deployment policy.</p></blockquote></li></ul></li></ul><p>最后点击创建仓库按钮，就可以在仓库列表中找到刚刚创建的仓库了</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320165149705.png" alt="image-20230320165149705"></p><p>点击<code>copy按钮</code>查看仓库地址</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320165406279.png" alt="image-20230320165406279"></p><h2 id="创建角色" tabindex="-1">创建角色 <a class="header-anchor" href="#创建角色" aria-label="Permalink to &quot;创建角色&quot;">​</a></h2><p>前面npm-hosted创建好后，其实就可以上传自己的npm包到这个仓库了，一般不会使用系统账户进行登录发包，所以需要创建新的用户并授权npm相关权限，因此需要创建对应的角色和权限</p><p>点击左侧<code>Roles</code>菜单栏，在右侧面板点击创建角色，填写对应的角色名、id、描述等（仍然推荐语义明确）</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320165944937.png" alt="image-20230320165944937"></p><p>然后选择对应的权限，搜索npm，点击<code>Transfer All</code>将所有加入右侧列表</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320170145483.png" alt="image-20230320170145483"></p><p>如果你有还需要其他权限可以自行添加，这里讲下除了可以选择权限外，也可以选择已经存在的角色，这样也会拥有其权限，效果一样</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320170353059.png" alt="image-20230320170353059"></p><p>最后点击保存</p><h2 id="创建用户" tabindex="-1">创建用户 <a class="header-anchor" href="#创建用户" aria-label="Permalink to &quot;创建用户&quot;">​</a></h2><p>有了角色就可以创建用户关联此角色了，点击左侧Users菜单，在右侧面板中点击创建用户</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320170654757.png" alt="image-20230320170654757"></p><ul><li>用户ID：用来登录npm的用户名</li><li>Firstname：显示名字，随意填</li><li>Lastname：随意填</li><li>Email：可以随意填</li><li>password：你的密码</li><li>status：用户状态，选择active</li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>以上红框中需要重视其他可以随意填</p></div><p>接着关联角色，将刚刚创建的角色移入右侧，点击创建</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320171019351.png" alt="image-20230320171019351"></p><h2 id="权限认证" tabindex="-1">权限认证 <a class="header-anchor" href="#权限认证" aria-label="Permalink to &quot;权限认证&quot;">​</a></h2><p>有了相关的角色后，需要对一些权限添加认证，也就是需要登录认证，才可以进行操作</p><p>点击左侧<code>Realms</code>菜单，将你需要认证的权限移入右侧，点击保存</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320171459435.png" alt="image-20230320171459435"></p><h2 id="发布npm包" tabindex="-1">发布npm包 <a class="header-anchor" href="#发布npm包" aria-label="Permalink to &quot;发布npm包&quot;">​</a></h2><ol><li><p>本地使用npm初始化创建一个项目</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> init -y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这里package.json文件内容如下，主文件为<code>index.js</code></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test-deploy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">1.0.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">keywords</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [],</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">license</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">ISC</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><p>简单创建一个<code>index.js</code>文件：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> add </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> y</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#BABED8;"> x </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> y</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">  add</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>设置npm仓库，你可以使用<code>npm config set registry xxxx</code> 创建，这里推荐在项目创建<code>.npmrc</code>文件</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 地址改为自己 npm-hosted 仓库地址</span></span>
<span class="line"><span style="color:#BABED8;">registry</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">http://192.168.10.10:8081/repository/npm-hosted/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>或者在<code>package.json</code>中添加：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">publishConfig</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">registry</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">http://192.168.10.10:8081/repository/npm-hosted/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320172745102.png" alt="image-20230320172745102"></p></li><li><p>登录并发布</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 使用创建的用户登录</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> login</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320173208309.png" alt="image-20230320173208309"></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 发布</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> publish</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320173258611.png" alt="image-20230320173258611"></p></li><li><p>在仓库中查看</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320173512796.png" alt="image-20230320173512796"></p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320173424057.png" alt="image-20230320173424057"></p></li></ol><h2 id="验证npm包" tabindex="-1">验证npm包 <a class="header-anchor" href="#验证npm包" aria-label="Permalink to &quot;验证npm包&quot;">​</a></h2><p>在一个新项目中安装上传的npm包，注意如果你没有设置npm全局仓库配置，需要创建<code>.npmrc</code>添加npm仓库</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320174205932.png" alt="image-20230320174205932"></p><p>可以看到安装成功，接着创建<code>index.js</code>文件并引用里面的<code>add</code>方法</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// index.js</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> add </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test-deploy</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(</span><span style="color:#82AAFF;">add</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">2</span><span style="color:#BABED8;">))</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320174525384.png" alt="image-20230320174525384"></p><p>可以看到运行成功</p><p>这里有一个坑，之所以安装成功，是因为我们的库中没有依赖其他的npm包，如果有依赖私有仓库没有的npm包，这里安装时就会报错，我们复现下：</p><p>重新在我们的npm包里安装一个私有仓库没有的依赖，这里安装<code>day</code>，注意需要先把<code>.npmrc</code>中的仓库注释掉，这样可以从官方的<code>npm</code>仓库中下载</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># test-deploy 中安装 day</span></span>
<span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> devops test-deploy npm install day</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice created a lockfile as package-lock.json. You should commit this file.</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> WARN test-deploy@1.0.0 No description</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> WARN test-deploy@1.0.0 No repository field.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">+</span><span style="color:#C3E88D;"> day@0.0.2</span></span>
<span class="line"><span style="color:#FFCB6B;">added</span><span style="color:#F78C6C;"> 1</span><span style="color:#C3E88D;"> package from </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> contributor and audited </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> package in </span><span style="color:#F78C6C;">1.57</span><span style="color:#C3E88D;">s</span></span>
<span class="line"><span style="color:#FFCB6B;">found</span><span style="color:#F78C6C;"> 0</span><span style="color:#C3E88D;"> vulnerabilities</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>修改版本号：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test-deploy</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">1.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {},</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">keywords</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [],</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">license</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">ISC</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">dependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">day</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">0.0.2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>重新发布：注意<code>.npmrc</code>添加仓库地址</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> devops test-deploy npm publish</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice 📦  test-deploy@1.0.1</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice === Tarball Contents ===</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice </span><span style="color:#F78C6C;">56</span><span style="color:#C3E88D;">B  index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice </span><span style="color:#F78C6C;">208</span><span style="color:#C3E88D;">B package.json</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice === Tarball Details ===</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice name:          test-deploy</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice version:       </span><span style="color:#F78C6C;">1.0</span><span style="color:#C3E88D;">.1</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice package size:  </span><span style="color:#F78C6C;">305</span><span style="color:#C3E88D;"> B</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice unpacked size: </span><span style="color:#F78C6C;">264</span><span style="color:#C3E88D;"> B</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice shasum:        </span><span style="color:#F78C6C;">47437424</span><span style="color:#C3E88D;">c9652266929c74a9870e54c0fb0db253</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice integrity:     sha512-zU8+K0q2vJWgD[...]NSzuMA5PKURmw==</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice total files:   </span><span style="color:#F78C6C;">2</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice</span></span>
<span class="line"><span style="color:#FFCB6B;">+</span><span style="color:#C3E88D;"> test-deploy@1.0.1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>在另一个项目中重新安装我们的包：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> devops use-npm-package rm -rf node_modules package-lock.json</span></span>
<span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> devops use-npm-package npm i</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! code E404</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! </span><span style="color:#F78C6C;">404</span><span style="color:#C3E88D;"> Not Found - GET http://192.168.10.10:8081/repository/npm-hosted/day - Package </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">day</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> not found</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! </span><span style="color:#F78C6C;">404</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! </span><span style="color:#F78C6C;">404</span><span style="color:#89DDFF;">  &#39;</span><span style="color:#C3E88D;">day@0.0.2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> is not in the npm registry.</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! </span><span style="color:#F78C6C;">404</span><span style="color:#C3E88D;"> You should bug the author to publish it </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">or</span><span style="color:#C3E88D;"> use the name yourself!</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! </span><span style="color:#F78C6C;">404</span><span style="color:#C3E88D;"> It was specified as a dependency of </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test-deploy</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! </span><span style="color:#F78C6C;">404</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! </span><span style="color:#F78C6C;">404</span><span style="color:#C3E88D;"> Note that you can also install from a</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! </span><span style="color:#F78C6C;">404</span><span style="color:#C3E88D;"> tarball, folder, http url, or git url.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> ERR! A complete log of this run can be found in:</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>发现安装失败，说<code>npm ERR! 404 Not Found - GET http://192.168.10.10:8081/repository/npm-hosted/day - Package &#39;day&#39; not found</code>，也就是在我们的私有仓库中找不到<code>day</code>npm包，其实npm下载时，也会下载包的依赖，所以会造成这种现象。接下来介绍<code>proxy、group</code>两种类型的仓库</p><h2 id="proxy和group仓库" tabindex="-1">proxy和group仓库 <a class="header-anchor" href="#proxy和group仓库" aria-label="Permalink to &quot;proxy和group仓库&quot;">​</a></h2><p>nexus3准备了3种仓库类型：</p><ul><li>hosted：本地存储仓库，说白了就是用nexus托管存储包的仓库</li><li>proxy：代理仓库，可以代理到其他仓库，如npm官方仓库、淘宝仓库</li><li>group：组合多个仓库为一个地址</li></ul><p>了解了这几种仓库类型，就可以解决上面的问题了，通过proxy代理其他的仓库，然后使用group关联hosted和proxy，这样在安装包文件时对于私库不存在的包就会代理到其他仓库下载</p><h3 id="创建proxy" tabindex="-1">创建proxy <a class="header-anchor" href="#创建proxy" aria-label="Permalink to &quot;创建proxy&quot;">​</a></h3><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320182138263.png" alt="image-20230320182138263"></p><p>选择存储集为npm，点击创建</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320182220009.png" alt="image-20230320182220009"></p><h3 id="创建group" tabindex="-1">创建group <a class="header-anchor" href="#创建group" aria-label="Permalink to &quot;创建group&quot;">​</a></h3><p>创建仓库选择<code>npm(group)</code>，选择存储集，将<code>npm(hosted)</code>和<code>npm(proxy)</code>选中移入右侧后创建</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230320182346688.png" alt="image-20230320182346688"></p><p>这样就可以使用<code>npm(group)</code>的地址作为npm私库地址了</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>需要注意的是，右侧的顺序有优先级，当多个仓库都有同一个包时，优先下载第一个仓库的包</p></div><h3 id="验证私库" tabindex="-1">验证私库 <a class="header-anchor" href="#验证私库" aria-label="Permalink to &quot;验证私库&quot;">​</a></h3><p>需要注意的是发布包到<code>npm-group</code>是个付费功能😂，你可以发布包的时候用<code>npm-hosted</code>地址，安装包时用<code>npm-group</code></p><p>修改<code>.npmrc</code>为你的group地址</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .npmrc</span></span>
<span class="line"><span style="color:#BABED8;">registry</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">http://192.168.10.10:8081/repository/npm-group/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># hosted也行，重新拉取</span></span>
<span class="line"><span style="color:#BABED8;">registry</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">http://192.168.10.10:8081/repository/npm-hosted/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>重新安装，查看day也被成功安装了</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> devops use-npm-package npm i</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice created a lockfile as package-lock.json. You should commit this file.</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> WARN use-npm-package@1.0.0 No description</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> WARN use-npm-package@1.0.0 No repository field.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">added</span><span style="color:#F78C6C;"> 2</span><span style="color:#C3E88D;"> packages from </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> contributor in </span><span style="color:#F78C6C;">0.108</span><span style="color:#C3E88D;">s</span></span>
<span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> devops use-npm-package tree -a</span></span>
<span class="line"><span style="color:#82AAFF;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#C3E88D;"> index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#C3E88D;"> node_modules</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#C3E88D;"> ├── day</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#C3E88D;"> │   ├── day.js</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#C3E88D;"> │   ├── package.json</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#C3E88D;"> │   └── readme.md</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#C3E88D;"> └── test-deploy</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#C3E88D;">     ├── index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">│  </span><span style="color:#C3E88D;">     └── package.json</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#C3E88D;"> .npmrc</span></span>
<span class="line"><span style="color:#FFCB6B;">├──</span><span style="color:#C3E88D;"> package.json</span></span>
<span class="line"><span style="color:#FFCB6B;">└──</span><span style="color:#C3E88D;"> package-lock.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">3</span><span style="color:#C3E88D;"> directories, </span><span style="color:#F78C6C;">9</span><span style="color:#C3E88D;"> files</span></span>
<span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> devops use-npm-package node index.js</span></span>
<span class="line"><span style="color:#FFCB6B;">3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="打标签" tabindex="-1">打标签 <a class="header-anchor" href="#打标签" aria-label="Permalink to &quot;打标签&quot;">​</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> version </span><span style="color:#F78C6C;">1.0</span><span style="color:#C3E88D;">.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 没有指定标签，默认为latest</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> publish --tag beta</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看包信息</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> info packageName</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 示例</span></span>
<span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> devops test-deploy npm info test-deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#BABED8;">-deploy@1.0.3 </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> ISC</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> deps:</span><span style="color:#F78C6C;"> 1</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> versions:</span><span style="color:#F78C6C;"> 6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">dist</span></span>
<span class="line"><span style="color:#FFCB6B;">.tarball:</span><span style="color:#C3E88D;"> http://192.168.10.10:8081/repository/npm-hosted/test-deploy/-/test-deploy-1.0.3.tgz</span></span>
<span class="line"><span style="color:#FFCB6B;">.shasum:</span><span style="color:#C3E88D;"> e2dde05711a25e6c9df33567ae205f603eeeaead</span></span>
<span class="line"><span style="color:#FFCB6B;">.integrity:</span><span style="color:#C3E88D;"> sha512-3pNZUUkDsupK7F0gzGWQXh4rFpZVvfHs+6brPKmA9oxnSyYbmb0L9NDH5+BW2iBRGYgS91UXwOQWiJJHgfo9cg==</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">dependencies:</span></span>
<span class="line"><span style="color:#FFCB6B;">day:</span><span style="color:#F78C6C;"> 0.0</span><span style="color:#C3E88D;">.2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">dist-tags:</span></span>
<span class="line"><span style="color:#FFCB6B;">beta:</span><span style="color:#F78C6C;"> 1.0</span><span style="color:#C3E88D;">.3    latest: </span><span style="color:#F78C6C;">1.0</span><span style="color:#C3E88D;">.3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">published</span><span style="color:#F78C6C;"> 5</span><span style="color:#C3E88D;"> minutes ago</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>不断更新中...</p>`,100);function i(y,m,u,d,b,F){const a=n("Reward"),p=n("Gitalk");return c(),e("div",null,[t,s(a),s(p)])}const h=l(r,[["render",i]]);export{C as __pageData,h as default};
