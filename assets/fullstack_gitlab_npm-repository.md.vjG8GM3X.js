import{_ as p,c as e,J as s,V as o,o as t,G as n}from"./chunks/framework.SV1ROkXV.js";const g=JSON.parse('{"title":"Gitlabæ­å»ºnpmä»“åº“","description":"å¦‚ä½•ä½¿ç”¨Gitlabæ­å»ºnpmä»“åº“,é€šè¿‡ä»¥ä¸‹è¿™äº›æ­¥éª¤å¸®ä½ å¿«é€Ÿæ­å»º","frontmatter":{"title":"Gitlabæ­å»ºnpmä»“åº“","description":"å¦‚ä½•ä½¿ç”¨Gitlabæ­å»ºnpmä»“åº“,é€šè¿‡ä»¥ä¸‹è¿™äº›æ­¥éª¤å¸®ä½ å¿«é€Ÿæ­å»º","keywords":"npmç§æœ‰ä»“åº“,æ­å»ºnpmä»“åº“,gitlabä»“åº“,gitlabæ­å»ºnpmä»“åº“","logo":"https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/icon-npm.png"},"headers":[],"relativePath":"fullstack/gitlab/npm-repository.md","filePath":"fullstack/gitlab/npm-repository.md","lastUpdated":1709440279000}'),r={name:"fullstack/gitlab/npm-repository.md"},c=o(`<h1 id="gitlabæ­å»ºnpmä»“åº“" tabindex="-1">Gitlabæ­å»ºnpmä»“åº“ <a class="header-anchor" href="#gitlabæ­å»ºnpmä»“åº“" aria-label="Permalink to &quot;Gitlabæ­å»ºnpmä»“åº“&quot;">â€‹</a></h1><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>ä½¿ç”¨gitlabçš„ä»“åº“æ³¨å†Œè¡¨ç‰¹æ€§éœ€è¦ç‰ˆæœ¬<code>14.0+</code>ï¼Œå¦‚æœä½ çš„ç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œè¯·å…ˆæ ¹æ®è‡ªå·±çš„éœ€æ±‚åˆç†å‡çº§åå†ä½¿ç”¨</p></div><p>npmç§æœ‰ä»“åº“çš„æ­å»ºæ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ä½¿ç”¨<a href="/fullstack/docker/npm-repository.html">docker(é˜…è¯»æ­¤ç¯‡)</a>ï¼Œè¿™é‡Œè®²è¿°å¦‚ä½•ä½¿ç”¨gitlabä½œä¸ºnpmä»“åº“æ–¹æ³•ï¼Œgitlabä»“åº“æœ‰å¤šç§ä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œéƒ½ä¼šè®²è§£åˆ°ã€‚æ¥ä¸‹æ¥å°±æ¥å­¦ä¹ ä¸‹å¦‚ä½•ä½¿ç”¨gitlabæ­å»ºnpmä»“åº“ã€‚</p><h2 id="åˆ›å»ºç»„ä¸é¡¹ç›®" tabindex="-1">åˆ›å»ºç»„ä¸é¡¹ç›® <a class="header-anchor" href="#åˆ›å»ºç»„ä¸é¡¹ç›®" aria-label="Permalink to &quot;åˆ›å»ºç»„ä¸é¡¹ç›®&quot;">â€‹</a></h2><p>ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºè¿™é‡Œä»å¤´è®²èµ·ï¼Œåˆ†åˆ«åˆ›å»ºç»„ã€é¡¹ç›®</p><ol><li>åˆ›å»ºç»„ <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321112321027.png" alt="image-20230321112321027"></li><li>åˆ›å»ºé¡¹ç›® <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321112503456.png" alt="image-20230321112503456"><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321112816193.png" alt="image-20230321112816193"></li></ol><h2 id="åˆå§‹åŒ–é¡¹ç›®" tabindex="-1">åˆå§‹åŒ–é¡¹ç›® <a class="header-anchor" href="#åˆå§‹åŒ–é¡¹ç›®" aria-label="Permalink to &quot;åˆå§‹åŒ–é¡¹ç›®&quot;">â€‹</a></h2><p>æœ¬åœ°åˆ›å»ºä¸€ä¸ªç®€å•çš„é¡¹ç›®ï¼Œæ¨é€åˆ°gitlabé¡¹ç›®ä¸­</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># åˆ›å»ºè·¯å¾„</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#C3E88D;"> gitlab-frontend-helper-lib </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#FFCB6B;"> ccd</span><span style="color:#C3E88D;"> gitlab-frontend-helper-lib</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># åˆå§‹åŒ– npm</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> init</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>package.json</code>æ–‡ä»¶å†…å®¹å®ä¾‹ï¼š</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">helper</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">0.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">å‰ç«¯é€šç”¨åº“</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">keywords</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [],</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">license</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">ISC</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>åˆ›å»º<code>index.js</code>æ–‡ä»¶ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> add </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> y</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#BABED8;"> x </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> y</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> minus </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> y</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#BABED8;"> x </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> y</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> add</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> minus </span><span style="color:#89DDFF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ¨é€é¡¹ç›®åˆ°gitlab</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> init</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#89DDFF;"> &gt;</span><span style="color:#C3E88D;"> .gitignore </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#89DDFF;"> EOF</span></span>
<span class="line"><span style="color:#C3E88D;">node_modules</span></span>
<span class="line"><span style="color:#C3E88D;">.DS_Store</span></span>
<span class="line"><span style="color:#89DDFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> add .</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> cm -m </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">åˆæ¬¡æäº¤(#0)</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> remote add origin http://192.168.10.10/frontend-lib/helper.git</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> push --set-upstream origin main</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="é¡¹ç›®ä½œä¸ºä¾èµ–" tabindex="-1">é¡¹ç›®ä½œä¸ºä¾èµ– <a class="header-anchor" href="#é¡¹ç›®ä½œä¸ºä¾èµ–" aria-label="Permalink to &quot;é¡¹ç›®ä½œä¸ºä¾èµ–&quot;">â€‹</a></h2><p>ä½ å¯ä»¥åœ¨æŸä¸ªé¡¹ç›®ä¸­æŠŠåˆšåˆšä¸Šä¼ çš„é¡¹ç›®ä½œä¸ºä¾èµ–å®‰è£…ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†å¯ä»¥å¯¹ä¸Šä¼ çš„åº“æ‰“ä¸Š<code>tag</code>ï¼Œç„¶åé¡¹ç›®ä¸­å¯ä»¥ä¸‹è½½æŒ‡å®štag</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># gitlab-frontend-helper-lib æ‰“tag</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> tag </span><span style="color:#F78C6C;">0.0</span><span style="color:#C3E88D;">.1</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> push --tags</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ä½¿ç”¨å½“å‰åº“ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#C3E88D;"> gitlab-npm </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#82AAFF;"> cd</span><span style="color:#C3E88D;"> gitlab-npm </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> init -y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ‰‹åŠ¨åœ¨<code>package.json</code>æ–‡ä»¶ä¸­æ·»åŠ å¾…å®‰è£…çš„ä¾èµ–é¡¹ç›®</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">gitlab-npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">1.0.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">echo </span><span style="color:#BABED8;">\\&quot;</span><span style="color:#C3E88D;">Error: no test specified</span><span style="color:#BABED8;">\\&quot;</span><span style="color:#C3E88D;"> &amp;&amp; exit 1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">keywords</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [],</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">license</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">ISC</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">dependencies</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // è¿™é‡ŒæŒ‡å®š helperä¾èµ–çš„åœ°å€ä¸º git+http://192.168.10.10/frontend-lib/helper.gitï¼Œå¹¶ä½¿ç”¨ tag 0.0.1ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">helper</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git+http://192.168.10.10/frontend-lib/helper.git#0.0.1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å®‰è£…å½“å‰é¡¹ç›®ä¾èµ–ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm i</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice created a lockfile as package-lock.json. You should commit this file.</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> WARN use-gitlab-npm@1.0.0 No description</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> WARN use-gitlab-npm@1.0.0 No repository field.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">added</span><span style="color:#F78C6C;"> 1</span><span style="color:#C3E88D;"> package in </span><span style="color:#F78C6C;">0.577</span><span style="color:#C3E88D;">s</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>éªŒè¯<code>helper</code>åŒ…ï¼Œåˆ›å»ºjsæ–‡ä»¶</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// index.js</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> helper </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">helper</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#BABED8;">(helper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#BABED8;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;"> 2</span><span style="color:#BABED8;">))</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ‰§è¡Œæ‰“å°</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">node</span><span style="color:#C3E88D;"> index.js // </span><span style="color:#F78C6C;">3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™ç§æ–¹å¼çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œä¸è¿‡ä¸å¤Ÿçµæ´»ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨gitlabå®˜æ–¹çš„ä»“åº“æ³¨å†Œè¡¨</p><h2 id="gitlabè½¯ä»¶åº“" tabindex="-1">Gitlabè½¯ä»¶åº“ <a class="header-anchor" href="#gitlabè½¯ä»¶åº“" aria-label="Permalink to &quot;Gitlabè½¯ä»¶åº“&quot;">â€‹</a></h2><p><a href="https://docs.gitlab.com/ee/user/packages/npm_registry/" target="_blank" rel="noreferrer">Gitlabæ”¯æŒåŒ…ä»“åº“æ³¨å†Œäº†</a>ï¼Œä¹ŸåŠæ—¶å¯ä»¥å½“åšåŒ…ä»“åº“ä½¿ç”¨ï¼Œéœ€è¦ç‰ˆæœ¬<code>14.0+</code>ï¼Œè¿™é‡Œæ¼”ç¤º<a href="https://docs.gitlab.com/ee/user/packages/npm_registry/" target="_blank" rel="noreferrer">npmä»“åº“æ³¨å†Œè¡¨</a>æ¥ç®¡ç†npmåŒ…</p><h3 id="æ³¨å†Œè¡¨ç±»å‹" tabindex="-1">æ³¨å†Œè¡¨ç±»å‹ <a class="header-anchor" href="#æ³¨å†Œè¡¨ç±»å‹" aria-label="Permalink to &quot;æ³¨å†Œè¡¨ç±»å‹&quot;">â€‹</a></h3><p>gitlabæ”¯æŒä¸¤ç§çš„ä»“åº“æ³¨å†Œè¡¨<a href="https://docs.gitlab.com/ee/user/packages/npm_registry/#naming-convention" target="_blank" rel="noreferrer">é¡¹ç›®çº§åˆ«å’Œç¤ºä¾‹çº§åˆ«(ç»„çº§åˆ«)</a>ï¼Œä¸¤è€…å¯¹äºåŒ…çš„ä¸Šä¼ æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼Œåªæ˜¯ä½œç”¨äºåŒ…çš„å®‰è£…ï¼ŒåŒ…çš„æ³¨å†Œè¡¨åå­—æ˜¯scopeå½¢å¼ï¼Œä¹Ÿå°±æ˜¯è¯´åŒ…åæ˜¯<code>@scope/packageName</code>è¿™ç§å½¢å¼</p><ul><li>å®ä¾‹çº§åˆ«ï¼šä½ å¯ä»¥ç†è§£ä¸ºgroupçº§åˆ«ï¼Œå¿…é¡»æä¾›ä¸€ä¸ªèŒƒå›´çš„scopeåå­—ï¼Œå½“ä½ éœ€è¦åœ¨ä¸åŒçš„ç»„åˆ›å»ºåŒ…æ—¶ï¼Œå¯ä»¥ä½¿ç”¨@scope/packageName å¼•å…¥ï¼Œä½ å¯ä»¥ä¸ºä¸åŒçš„ç»„è®¾ç½®æƒé™ï¼Œå…¬å¼€ä½¿ç”¨</li><li>é¡¹ç›®çº§åˆ«ï¼šæ³¨å†Œè¡¨ URLä»…é’ˆå¯¹è¯¥èŒƒå›´æ›´æ–°ã€‚åœ¨é¡¹ç›®çº§åˆ«æ³¨å†ŒåŒ…æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨/é™„åŠ æ‚¨è‡ªå·±çš„å”¯ä¸€èŒƒå›´åˆ°æ‚¨çš„åŒ…åç§°</li></ul><h3 id="å‘å¸ƒå‡†å¤‡" tabindex="-1">å‘å¸ƒå‡†å¤‡ <a class="header-anchor" href="#å‘å¸ƒå‡†å¤‡" aria-label="Permalink to &quot;å‘å¸ƒå‡†å¤‡&quot;">â€‹</a></h3><p>è¿™é‡Œä¿®æ”¹å‰é¢çš„ä»“åº“</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// package.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // åŒ…å</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@frontend-lib/helper</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // åŒ…ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">0.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">å‰ç«¯é€šç”¨åº“</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">keywords</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [],</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">author</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">license</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">ISC</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>åˆ›å»º<code>.npmrc</code>æ–‡ä»¶ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">#@scope:registry=https://your_domain_name/api/v4/projects/your_project_id/packages/npm/</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#//your_domain_name/api/v4/projects/your_project_id/packages/npm/:_authToken=&quot;\${NPM_TOKEN}&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æ ¼å¼:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  - scopeï¼šä½ çš„scopename</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  - your_domain_nameï¼šä½ çš„gitlabåŸŸåæˆ–ip</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  - your_project_idï¼šä½ çš„ä»“åº“id</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  - NPM_TOKENï¼šç”¨æˆ·å‘å¸ƒçš„ç”¨æˆ·token</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#FFCB6B;">@frontend-lib:registry</span><span style="color:#BABED8;">=http://192.168.10.10/api/v4/projects/4/packages/npm/</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½ å¯ä»¥ç›´æ¥å°†tokenå†™åœ¨è¿™é‡Œ</span></span>
<span class="line"><span style="color:#FFCB6B;">//192.168.10.10/api/v4/projects/4/packages/npm/:_authToken</span><span style="color:#BABED8;">=HUzUdsos4WfnsgfUBi6j</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è®°å¾—å¿½ç•¥æ‰<code>.npmrc</code>è¿½è¸ªï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitignore</span></span>
<span class="line"><span style="color:#FFCB6B;">.npmrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="å‘å¸ƒnpmåŒ…" tabindex="-1">å‘å¸ƒnpmåŒ… <a class="header-anchor" href="#å‘å¸ƒnpmåŒ…" aria-label="Permalink to &quot;å‘å¸ƒnpmåŒ…&quot;">â€‹</a></h2><p>å‘å¸ƒnpmåŒ…å¯ä»¥æ‰‹åŠ¨å‘å¸ƒä¹Ÿå¯ä»¥è‡ªåŠ¨æ„å»ºå‘å¸ƒï¼Œä¸¤ç§æ–¹å¼éƒ½æ¼”ç¤ºä¸‹ã€‚æœ¬æ¬¡æ¼”ç¤ºé¡¹ç›®ä¸Šä¼ è‡³githubäº†</p><ul><li><a href="https://github.com/ihengshuai/gitlab-practice/tree/main/gitlab-frontend-helper-lib" target="_blank" rel="noreferrer">https://github.com/ihengshuai/gitlab-practice/tree/main/gitlab-frontend-helper-lib</a></li><li><a href="https://github.com/ihengshuai/gitlab-practice/tree/main/gitlab-npm" target="_blank" rel="noreferrer">https://github.com/ihengshuai/gitlab-practice/tree/main/gitlab-npm</a></li></ul><h3 id="æ‰‹åŠ¨å‘å¸ƒ" tabindex="-1">æ‰‹åŠ¨å‘å¸ƒ <a class="header-anchor" href="#æ‰‹åŠ¨å‘å¸ƒ" aria-label="Permalink to &quot;æ‰‹åŠ¨å‘å¸ƒ&quot;">â€‹</a></h3><p>åˆ›å»ºtoken</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321124138019.png" alt="image-20230321124138019"></p><p>æ‹¿åˆ°tokenåå°†å…¶å†™å…¥<code>.npmrc</code>æ–‡ä»¶ä¸­</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># å¦‚æœæ²¡æœ‰å°†tokenå†™å…¥npmrcï¼Œå¯ä»¥ç”¨å‘½ä»¤è¡Œä¼ å…¥</span></span>
<span class="line"><span style="color:#BABED8;">NPM_TOKEN</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">HUzUdsos4WfnsgfUBi6j npm publish</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># è¿™é‡Œå†™å…¥äº†npmrcï¼Œç„¶åå‘å¸ƒ</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm publish</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice ğŸ“¦  @frontend-lib/helper@0.0.1</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice === Tarball Contents === </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice </span><span style="color:#F78C6C;">94</span><span style="color:#C3E88D;">B  index.js    </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice </span><span style="color:#F78C6C;">171</span><span style="color:#C3E88D;">B package.json</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice </span><span style="color:#F78C6C;">15</span><span style="color:#C3E88D;">B  README.md   </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice === Tarball Details === </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice name:          @frontend-lib/helper                    </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice version:       </span><span style="color:#F78C6C;">0.0</span><span style="color:#C3E88D;">.1                                   </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice package size:  </span><span style="color:#F78C6C;">369</span><span style="color:#C3E88D;"> B                                   </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice unpacked size: </span><span style="color:#F78C6C;">280</span><span style="color:#C3E88D;"> B                                   </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice shasum:        </span><span style="color:#F78C6C;">25</span><span style="color:#C3E88D;">bcde10511ed5f253bdf2761f86a92d62959847</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice integrity:     sha512-0spZZ3DBZZhpM[...]yDmfOTOUq0rqQ==</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice total files:   </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">                                       </span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice </span></span>
<span class="line"><span style="color:#FFCB6B;">+</span><span style="color:#C3E88D;"> @frontend-lib/helper@0.0.1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å¯ä»¥çœ‹åˆ°å‘å¸ƒæˆåŠŸï¼Œå¹¶æ ‡è®°æ˜¯æ‰‹åŠ¨å‘å¸ƒ</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321124452671.png" alt="image-20230321124452671"></p><h3 id="ci-cdè‡ªåŠ¨æ„å»ºnpmåŒ…" tabindex="-1">CI/CDè‡ªåŠ¨æ„å»ºnpmåŒ… <a class="header-anchor" href="#ci-cdè‡ªåŠ¨æ„å»ºnpmåŒ…" aria-label="Permalink to &quot;CI/CDè‡ªåŠ¨æ„å»ºnpmåŒ…&quot;">â€‹</a></h3><p>ä»¥ä¸Šä¾¿æ˜¯æ‰‹åŠ¨å‘å¸ƒnpmåŒ…çš„æ•´ä¸ªæµç¨‹ï¼Œä¸è¿‡æœ‰å¾ˆå¤šä¸æ–¹ä¾¿ï¼š</p><ul><li>å­˜å‚¨å‘åŒ…tokenä¸èƒ½å¿˜è®°</li><li>æ‰‹åŠ¨æ‰§è¡Œ</li></ul><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜å¯ä»¥ä½¿ç”¨gitlab ciè‡ªåŠ¨æ„å»ºå‘å¸ƒï¼š</p><ol><li><p>åˆ›å»ºciæ–‡ä»¶ï¼ŒæŒ‡å®šå‘å¸ƒåˆ°mainæŒ‡å®šåˆ†æ”¯æ—¶è¿›è¡Œå‘åŒ…</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># .gitlab-ci.yml</span></span>
<span class="line"><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> node:16-alpine</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">stages</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;"> -</span><span style="color:#C3E88D;"> deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">deploy_npm</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;"> stage</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> deploy</span></span>
<span class="line"><span style="color:#F07178;"> only</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">  -</span><span style="color:#C3E88D;"> main</span></span>
<span class="line"><span style="color:#F07178;"> tags</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;"> -</span><span style="color:#C3E88D;"> testing</span></span>
<span class="line"><span style="color:#F07178;"> script</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;"> -</span><span style="color:#C3E88D;"> npm config set registry https://registry.npm.taobao.org</span></span>
<span class="line"><span style="color:#89DDFF;"> -</span><span style="color:#C3E88D;"> npm install</span></span>
<span class="line"><span style="color:#89DDFF;"> -</span><span style="color:#C3E88D;"> npm run build</span></span>
<span class="line"><span style="color:#89DDFF;"> -</span><span style="color:#C3E88D;"> echo &quot;@frontend-lib:registry=http://192.168.10.10/api/v4/projects/\${CI_PROJECT_ID}/packages/npm/&quot; &gt; .npmrc</span></span>
<span class="line"><span style="color:#89DDFF;"> -</span><span style="color:#C3E88D;"> echo &quot;//192.168.10.10/api/v4/projects/\${CI_PROJECT_ID}/packages/npm/:_authToken=\${NPM_TOKEN}&quot; &gt;&gt; .npmrc</span></span>
<span class="line"><span style="color:#89DDFF;"> -</span><span style="color:#C3E88D;"> npm publish</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li><li><p>åˆ›å»ºæ¢å°†CIå˜é‡<code>NPM_TOKEN</code>ï¼Œå°†å€¼è®¾ç½®ä¸ºå‘åŒ…çš„token</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321134742476.png" alt="image-20230321134742476"></p></li><li><p>ä¸ºäº†é˜²æ­¢åç»­å¼€å‘å¯ä»¥åˆ é™¤æœ¬åœ°<code>.npmrc</code>æ–‡ä»¶</p></li><li><p>ä¿®æ”¹ç‰ˆæœ¬å·æäº¤ä»£ç </p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># package.json</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># version: 0.0.3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> add .</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> cm -m </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">add ci(#0)</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> push</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>æŸ¥çœ‹æµæ°´çº¿æ‰§è¡Œæƒ…å†µ <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321135048568.png" alt="image-20230321135048568"></p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321135116085.png" alt="image-20230321135116085"></p></li><li><p>æŸ¥çœ‹ä»“åº“ï¼Œè¿™é‡Œæˆ‘å‘äº†ä¸¤æ¬¡ <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321135219054.png" alt="image-20230321135219054"></p></li></ol><h2 id="ä½¿ç”¨npmåŒ…" tabindex="-1">ä½¿ç”¨npmåŒ… <a class="header-anchor" href="#ä½¿ç”¨npmåŒ…" aria-label="Permalink to &quot;ä½¿ç”¨npmåŒ…&quot;">â€‹</a></h2><p>ä½¿ç”¨npmåŒ…ä½ å¯ä»¥ç”¨æ ¹ç«¯ç‚¹æˆ–é¡¹ç›®ç«¯ç‚¹</p><ol><li><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®åˆå§‹åŒ–ï¼Œåˆ›å»º<code>.npmrc</code>æ–‡ä»¶ï¼Œæ ¹æ®æç¤ºå†™å…¥ä»“åº“åœ°å€ï¼š <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230321140703921.png" alt="image-20230321140703921"></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">@frontend-lib:registry</span><span style="color:#BABED8;">=http://192.168.10.10/api/v4/packages/npm/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å¦‚æœä½ çš„é¡¹ç›®æˆ–ç»„éœ€è¦æƒé™æ‰èƒ½è®¿é—®å°±éœ€è¦æ·»åŠ token</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># //192.168.10.10/api/v4/projects/4/packages/npm/:_authToken=jev-72gFiNtp1JGTLZFn</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>è¿™é‡Œä½ å¯ä»¥é€‰æ‹©æ ¹é…ç½®æˆ–è€…é¡¹ç›®çº§åˆ«çš„é…ç½®éƒ½å¯ä»¥</p></blockquote></li><li><p>ä¸‹è½½npmåŒ…</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> i @frontend-lib/helper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm i @frontend-lib/helper</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> notice created a lockfile as package-lock.json. You should commit this file.</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> WARN use-gitlab-npm@1.0.0 No description</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#C3E88D;"> WARN use-gitlab-npm@1.0.0 No repository field.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">+</span><span style="color:#C3E88D;"> @frontend-lib/helper@0.0.3</span></span>
<span class="line"><span style="color:#FFCB6B;">added</span><span style="color:#F78C6C;"> 1</span><span style="color:#C3E88D;"> package in </span><span style="color:#F78C6C;">0.537</span><span style="color:#C3E88D;">s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æµ‹è¯•ä»£ç </span></span>
<span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;">  gitlab-npm node index.js             </span></span>
<span class="line"><span style="color:#FFCB6B;">5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ol><blockquote><p>å¦‚æœä½ ä¸‹è½½å¤±è´¥äº†å¦‚404ã€401ï¼Œå¾ˆå¤§åŸå› æ˜¯æ²¡æœ‰æƒé™ï¼Œé€šè¿‡å°†é¡¹ç›®æˆ–ç»„çš„æƒé™è®¾ç½®publicè§£å†³ï¼Œæˆ–è€…æä¾›ç”¨æˆ·tokenå°±å¯ä»¥äº†</p></blockquote><h2 id="å‚è€ƒæ–‡æ¡£" tabindex="-1">å‚è€ƒæ–‡æ¡£ <a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£" aria-label="Permalink to &quot;å‚è€ƒæ–‡æ¡£&quot;">â€‹</a></h2><ul><li><a href="https://docs.gitlab.com/ee/user/packages/package_registry/" target="_blank" rel="noreferrer">https://docs.gitlab.com/ee/user/packages/package_registry/</a></li><li><a href="https://docs.gitlab.com/ee/user/packages/npm_registry/" target="_blank" rel="noreferrer">https://docs.gitlab.com/ee/user/packages/npm_registry/</a></li><li><a href="https://docs.gitlab.com/ee/user/packages/yarn_repository/" target="_blank" rel="noreferrer">https://docs.gitlab.com/ee/user/packages/yarn_repository/</a></li></ul>`,62);function i(y,F,b,D,m,u){const a=n("Reward"),l=n("Gitalk");return t(),e("div",null,[c,s(a),s(l)])}const h=p(r,[["render",i]]);export{g as __pageData,h as default};
