import{_ as p,c as e,J as s,V as o,o as t,G as n}from"./chunks/framework.SV1ROkXV.js";const B=JSON.parse('{"title":"å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•","description":"å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•åœ¨æé«˜ä»£ç è´¨é‡ã€å‡å°‘é”™è¯¯ã€æé«˜å›¢é˜Ÿåä½œå’ŒåŠ é€Ÿäº¤ä»˜æµç¨‹æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚å®ƒæ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ„å»ºå¯é ã€é«˜è´¨é‡çš„åº”ç”¨ç¨‹åºï¼Œæœ¬æ–‡æ¥çœ‹çœ‹Jestå’ŒCypressçš„ä½¿ç”¨","frontmatter":{"title":"å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•","description":"å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•åœ¨æé«˜ä»£ç è´¨é‡ã€å‡å°‘é”™è¯¯ã€æé«˜å›¢é˜Ÿåä½œå’ŒåŠ é€Ÿäº¤ä»˜æµç¨‹æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚å®ƒæ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ„å»ºå¯é ã€é«˜è´¨é‡çš„åº”ç”¨ç¨‹åºï¼Œæœ¬æ–‡æ¥çœ‹çœ‹Jestå’ŒCypressçš„ä½¿ç”¨","keywords":"æµ‹è¯•,jest,å•å…ƒæµ‹è¯•,ç«¯åˆ°ç«¯æµ‹è¯•,unit test,end-to-end test,è‡ªåŠ¨åŒ–æµ‹è¯•,ç»„ä»¶æµ‹è¯•,vueæµ‹è¯•","logo":"https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/icon-project-integration.png"},"headers":[],"relativePath":"frontend/project-integration/test-framework.md","filePath":"frontend/project-integration/test-framework.md","lastUpdated":1709440279000}'),r={name:"frontend/project-integration/test-framework.md"},c=o(`<h1 id="å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•" tabindex="-1">å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯• <a class="header-anchor" href="#å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•" aria-label="Permalink to &quot;å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•&quot;">â€‹</a></h1><p>å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•åœ¨æé«˜ä»£ç è´¨é‡ã€å‡å°‘é”™è¯¯ã€æé«˜å›¢é˜Ÿåä½œå’ŒåŠ é€Ÿäº¤ä»˜æµç¨‹æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚å®ƒæ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘å›¢é˜Ÿæ„å»ºå¯é ã€é«˜è´¨é‡çš„åº”ç”¨ç¨‹åº</p><p>å•å…ƒæµ‹è¯•ï¼ˆUnit Testingï¼‰å’Œç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆEnd-to-End Testingï¼‰æ˜¯ä¸¤ç§å¸¸è§çš„æµ‹è¯•æ–¹æ³•ï¼Œå®ƒä»¬åœ¨æµ‹è¯•çš„èŒƒå›´ã€ç›®çš„å’Œæ‰§è¡Œæ–¹å¼ä¸Šæœ‰æ‰€ä¸åŒã€‚å•å…ƒæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ä¸æ˜¯ç›¸äº’æ’æ–¥çš„ï¼Œè€Œæ˜¯äº’è¡¥çš„ã€‚å®ƒä»¬åœ¨ä¸åŒçš„å±‚é¢å’Œé˜¶æ®µæä¾›äº†ä¸åŒçš„ä»·å€¼ï¼Œå…±åŒæ„æˆäº†ä¸€ä¸ªå…¨é¢çš„æµ‹è¯•ç­–ç•¥</p><h2 id="å•æµ‹å’Œç«¯æµ‹åŒºåˆ«" tabindex="-1">å•æµ‹å’Œç«¯æµ‹åŒºåˆ« <a class="header-anchor" href="#å•æµ‹å’Œç«¯æµ‹åŒºåˆ«" aria-label="Permalink to &quot;å•æµ‹å’Œç«¯æµ‹åŒºåˆ«&quot;">â€‹</a></h2><h3 id="å•å…ƒæµ‹è¯•-unit" tabindex="-1">å•å…ƒæµ‹è¯•(Unit) <a class="header-anchor" href="#å•å…ƒæµ‹è¯•-unit" aria-label="Permalink to &quot;å•å…ƒæµ‹è¯•(Unit)&quot;">â€‹</a></h3><ul><li>å•å…ƒæµ‹è¯•å…³æ³¨äºæœ€å°çš„å¯æµ‹è¯•å•å…ƒï¼Œå¦‚å‡½æ•°ã€æ–¹æ³•æˆ–æ¨¡å—</li><li>ç›®çš„æ˜¯éªŒè¯ä»£ç ä¸­çš„æ¯ä¸ªç‹¬ç«‹å•å…ƒï¼ˆå¦‚å‡½æ•°ï¼‰æ˜¯å¦æŒ‰ç…§é¢„æœŸå·¥ä½œ</li><li>é€šå¸¸æ˜¯è‡ªåŠ¨åŒ–çš„ã€å¿«é€Ÿæ‰§è¡Œçš„ï¼Œä¸”ä¸ä¾èµ–äºå¤–éƒ¨èµ„æºæˆ–å…¶ä»–æ¨¡å—</li><li>éªŒè¯å•ä¸ªä»£ç å•å…ƒçš„è¡Œä¸ºï¼Œæä¾›å¿«é€Ÿåé¦ˆï¼Œå¹¶å¸®åŠ©æ•è·å’Œä¿®å¤é—®é¢˜</li></ul><h3 id="ç«¯åˆ°ç«¯æµ‹è¯•-end-to-end" tabindex="-1">ç«¯åˆ°ç«¯æµ‹è¯•(End-to-End) <a class="header-anchor" href="#ç«¯åˆ°ç«¯æµ‹è¯•-end-to-end" aria-label="Permalink to &quot;ç«¯åˆ°ç«¯æµ‹è¯•(End-to-End)&quot;">â€‹</a></h3><ul><li>ä»ç”¨æˆ·è§’åº¦å‡ºå‘ï¼Œæµ‹è¯•æ•´ä¸ªåº”ç”¨ç¨‹åºçš„åŠŸèƒ½å’Œæµç¨‹</li><li>æ¨¡æ‹ŸçœŸå®çš„ç”¨æˆ·äº¤äº’å’Œåœºæ™¯ï¼Œä»åº”ç”¨ç¨‹åºçš„å¤–éƒ¨è¿›è¡Œæµ‹è¯•ã€‚è·¨å¤šä¸ªæ¨¡å—ã€ç»„ä»¶å’ŒæœåŠ¡è¿›è¡Œï¼Œä»¥ç¡®ä¿æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†æ­£å¸¸ååŒå·¥ä½œ</li><li>æ¶‰åŠç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰äº¤äº’ã€ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œç­‰ï¼Œä»¥éªŒè¯æ•´ä¸ªåº”ç”¨ç¨‹åºçš„åŠŸèƒ½å’Œå¯ç”¨æ€§</li></ul><p>æ€»ä¹‹ï¼Œå•å…ƒæµ‹è¯•ä¸»è¦å…³æ³¨ä»£ç å†…éƒ¨çš„æ­£ç¡®æ€§ï¼Œè€Œç«¯åˆ°ç«¯æµ‹è¯•å…³æ³¨æ•´ä½“åŠŸèƒ½å’Œç”¨æˆ·ä½“éªŒã€‚ç»“åˆä½¿ç”¨è¿™ä¸¤ç§æµ‹è¯•æ–¹æ³•å¯ä»¥æé«˜è½¯ä»¶çš„è´¨é‡å’Œå¯é æ€§ã€‚åœ¨é¡¹ç›®ä¸­å°¤å…¶æ˜¯å…¬å…±ä¾èµ–å¦‚ç»„ä»¶åº“è‡³å°‘éƒ½éœ€è¦å•æµ‹ï¼Œç«¯æµ‹ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç¹çç‚¹ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ç¨‹åºç¨³å®šçš„é‡è¦éªŒè¯æ¸ é“</p><h2 id="å•å…ƒæµ‹è¯•-jest" tabindex="-1">å•å…ƒæµ‹è¯• - Jest <a class="header-anchor" href="#å•å…ƒæµ‹è¯•-jest" aria-label="Permalink to &quot;å•å…ƒæµ‹è¯• - Jest&quot;">â€‹</a></h2><p>è¿™é‡Œä½¿ç”¨Jestä½œä¸ºå•å…ƒæµ‹è¯•å·¥å…·ï¼Œ<a href="https://jestjs.io/zh-Hans/docs/getting-started" target="_blank" rel="noreferrer">Jest</a> æ˜¯ä¸€ä¸ªç”¨äº JavaScript åº”ç”¨ç¨‹åºçš„å¼€æºæµ‹è¯•æ¡†æ¶ã€‚å®ƒæ˜¯ç”± Facebook å¼€å‘å’Œç»´æŠ¤çš„ï¼Œé€šå¸¸ç”¨äºå•å…ƒæµ‹è¯•ã€‚Jest å…·æœ‰ç®€å•æ˜“ç”¨çš„ APIã€ä¸°å¯Œçš„åŠŸèƒ½å’Œå¼ºå¤§çš„æ–­è¨€åº“ï¼Œå¹¿æ³›åº”ç”¨äºå‰ç«¯å¼€å‘å’Œ Node.js ç¯å¢ƒä¸­</p><h3 id="å®‰è£…" tabindex="-1">å®‰è£… <a class="header-anchor" href="#å®‰è£…" aria-label="Permalink to &quot;å®‰è£…&quot;">â€‹</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm install jest -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="åˆå§‹åŒ–" tabindex="-1">åˆå§‹åŒ– <a class="header-anchor" href="#åˆå§‹åŒ–" aria-label="Permalink to &quot;åˆå§‹åŒ–&quot;">â€‹</a></h3><p>ä½¿ç”¨npxè¿›è¡Œäº¤äº’å¼ç”Ÿæˆé»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒä¼šæç¤ºä½ æ¯æ­¥çš„é€‰æ‹©ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npx jest --init</span></span>
<span class="line"><span style="color:#FFCB6B;">The</span><span style="color:#C3E88D;"> following questions will help Jest to create a suitable configuration for your project</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">âœ”</span><span style="color:#C3E88D;"> Would you like to use Jest when running </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> script in </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">package.json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">? â€¦ yes</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ”</span><span style="color:#C3E88D;"> Would you like to use Typescript for the configuration file? â€¦ no</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ”</span><span style="color:#C3E88D;"> Choose the test environment that will be used for testing â€º jsdom </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">browser-like</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ”</span><span style="color:#C3E88D;"> Do you want Jest to add coverage reports? â€¦ yes</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ”</span><span style="color:#C3E88D;"> Which provider should be used to instrument code for coverage? â€º v8</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ”</span><span style="color:#C3E88D;"> Automatically clear mock calls, instances, contexts and results before every test? â€¦ yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">âœï¸</span><span style="color:#C3E88D;">  Modified test/package.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">ğŸ“</span><span style="color:#C3E88D;">  Configuration file created at test/jest.config.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>é»˜è®¤é…ç½®æ–‡ä»¶å¤§æ¦‚æ˜¯ä¸‹é¢çš„å†…å®¹ï¼šé…ç½®ä¸­æœ‰å¾ˆå¤šæ³¨é‡Šæä¾›æˆ‘ä»¬å‚è€ƒï¼Œå¯¹äºé»˜è®¤çš„é…ç½®å°±ä¸ç”¨åˆ é™¤å¤šè¯­çš„æ³¨é‡Šäº†ï¼Œæ–¹ä¾¿å‚è€ƒã€‚é€šå¸¸éƒ½æ˜¯å¯¹éœ€è¦çš„é…ç½®é¡¹åšä¿®æ”¹å³å¯</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> config </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // All imported modules in your tests should be mocked automatically</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // automock: false,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // Automatically clear mock calls, instances, contexts and results before every test</span></span>
<span class="line"><span style="color:#F07178;">  clearMocks</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // Indicates whether the coverage information should be collected while executing the test</span></span>
<span class="line"><span style="color:#F07178;">  collectCoverage</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // An array of glob patterns indicating a set of files for which coverage information should be collected</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // collectCoverageFrom: undefined,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // The directory where Jest should output its coverage files</span></span>
<span class="line"><span style="color:#F07178;">  coverageDirectory</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">coverage</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // An array of regexp pattern strings used to skip coverage collection</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // coveragePathIgnorePatterns: [</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  //   &quot;/node_modules/&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // ],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // Indicates which provider should be used to instrument code for coverage</span></span>
<span class="line"><span style="color:#F07178;">  coverageProvider</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">v8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // Make calling deprecated APIs throw helpful error messages</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // errorOnDeprecated: false,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // A list of paths to directories that Jest should use to search for files in</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // roots: [</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  //   &quot;&lt;rootDir&gt;&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // ],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // The test environment that will be used for testing</span></span>
<span class="line"><span style="color:#F07178;">  testEnvironment</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">jsdom</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // çœç•¥å…¶ä»–...</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> config</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>å¸¸ç”¨çš„é…ç½®ï¼š</p><ul><li><p>collectCoverageï¼šbooleanå€¼ï¼Œç”¨æ¥ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šï¼Œé€šå¸¸ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œ<code>--coverage</code>å‚æ•°ç”Ÿæˆ</p></li><li><p>moduleFileExtensionsï¼šå¯¹äºå¼•å…¥æ–‡ä»¶å¯ä»¥çœå»æ–‡ä»¶åç¼€ï¼Œjestä¼šæ ¹æ®è§„åˆ™ä¸€ä¸€åŒ¹é…</p></li><li><p>moduleNameMapperï¼šæ¨¡å—åŒ¹é…è§„åˆ™ï¼Œå‘Šè¯‰jestæ”¹æ¨¡å—çš„åŒ¹é…è·¯å¾„</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  moduleNameMapper</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // å½“åŒ¹é…åˆ° .css ç­‰ç»“å°¾çš„æ–‡ä»¶æ—¶å¯¹åº” /__mocks__/style-mock.ts æ–‡ä»¶</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#BABED8;">\\\\</span><span style="color:#FFCB6B;">.(css|less|scss|sass)$</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">&lt;rootDir&gt;/__mocks__/style-mock.ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // å½“åŒ¹é… @ui å¼€å¤´çš„çš„å¯¹åº”åˆ° src æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">@ui/(.*)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">&lt;rootDir&gt;/src/$1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>setupFilesï¼šåœ¨æµ‹è¯•ç¯å¢ƒå‡†å¤‡åå’Œå®‰è£…jestæ¡†æ¶å‰åšä¸€äº›é…ç½®ï¼Œå¸¸ç”¨æ¥æ·»åŠ ä¸€äº›å…¨å±€ç¯å¢ƒæ¨¡æ‹Ÿæ•°æ®</p></li><li><p>setupFilesAfterEnvï¼šåœ¨å®‰è£…jestæ¡†æ¶åå¯¹jeståšä¸€äº›æ‰©å±•ï¼Œç›¸æ¯”setupFilesæ›´åŠ é€šç”¨</p></li><li><p>testEnvironmentï¼šjestæ¨¡æ‹Ÿçš„ç¯å¢ƒï¼Œå¯ä»¥é€‰æ‹©nodeã€jsdomæ¥æ¨¡æ‹Ÿnodeå’Œæµè§ˆå™¨ç¯å¢ƒ</p></li><li><p>testMatchï¼šæŒ‡å®šè¦æµ‹è¯•å“ªäº›æ–‡ä»¶</p></li><li><p>transformï¼šä½¿ç”¨ä¸€äº›æ’ä»¶å¯¹ä»£ç è¿›è¡Œè½¬ä¹‰ä»¥ä¾¿jestå¯ä»¥ç†è§£ï¼Œå¦‚è®¾ç½®tsxè½¬ä¹‰</p></li></ul><p>ä»¥ä¸Šæ˜¯æœ€åŸºæœ¬çš„é…ç½®ï¼Œjestçš„é…ç½®è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œè¿˜è¦å®˜æ–¹æœ‰åˆ—ä¸¾äº†ä¸€ä¸ªè¡¨å¯ä»¥<a href="https://jestjs.io/docs/configuration" target="_blank" rel="noreferrer">éšæ—¶ç¿»é˜…ä¸ç”¨æ­»è®°</a></p><h3 id="è½¬è¯‘å™¨" tabindex="-1">è½¬è¯‘å™¨ <a class="header-anchor" href="#è½¬è¯‘å™¨" aria-label="Permalink to &quot;è½¬è¯‘å™¨&quot;">â€‹</a></h3><p>Jestä¸­æœ‰è½¬ä¹‰å™¨çš„æ¦‚å¿µæ¥å¸®åŠ©å®ƒç†è§£ç¼–å†™çš„ä»£ç ï¼Œå¯ä»¥æ¯”åšbabelå¯¹ä»£ç åšä¸€äº›è½¬æ¢æ¥å…¼å®¹æµè§ˆå™¨ï¼Œå·®ä¸å¤šä¸€æ ·çš„é“ç†</p><ol><li><p>æ¨¡å—å¼•ç”¨è½¬æ¢</p><p>åœ¨å•ä¸ªæµ‹è¯•æ–‡ä»¶ä¸­éƒ½ä¼šå¼•å…¥æˆ‘ä»¬ç¼–å†™çš„ä»£ç ï¼Œç„¶åå¯¹æ­¤ä»£ç çš„åŠŸèƒ½è¿›è¡Œæµ‹è¯•ï¼Œè€Œå‰ç«¯é€šå¸¸éƒ½æ˜¯ä»¥esmoduleçš„å½¢å¼è¿›è¡Œå‡½æ•°çš„å¯¼å‡ºï¼Œjesté»˜è®¤ä½¿ç”¨çš„æ˜¯commonjsï¼Œå¯¹äºmoduleè¯­æ³•jestä¸è®¤è¯†å°±ä¼šæŠ¥é”™</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> sum</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">../core</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;"> // æŠ¥é”™</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ç¬¬ä¸€ä¸ªæµ‹è¯•</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>é‚£ä¹ˆå¯ä»¥å¯¹jestæ·»åŠ è½¬ä¹‰å™¨å°†esmoduleæ¨¡å—çš„ä»£ç è½¬æ¢æˆcommonjså°±å¯ä»¥äº†ã€‚æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.config.js</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  transform</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">^.+</span><span style="color:#BABED8;">\\\\</span><span style="color:#FFCB6B;">.(ts|tsx|js|jsx)$</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">      &quot;</span><span style="color:#C3E88D;">babel-jest</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      {</span></span>
<span class="line"><span style="color:#BABED8;">        presets</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> targets</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> node</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">current</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> }]]</span></span>
<span class="line"><span style="color:#89DDFF;">      },</span></span>
<span class="line"><span style="color:#89DDFF;">    ],</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä¸Šé¢ä½¿ç”¨äº† <code>babel-jest</code>å’Œ <code>@babel/preset-env</code>çš„ä¾èµ–åŒ…éœ€è¦å®‰è£…ä¸‹ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm i babel-jest @babel/preset-env -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¿™æ ·å°±å¯ä»¥è§£å†³esmoduleè¯­æ³•ä¸è¯†åˆ«çš„é—®é¢˜</p></li><li><p>è½¬æ¢typescriptï¼šç›®å‰é¡¹ç›®ä¸­çš„æ–‡ä»¶éƒ½æ˜¯ä»¥tsç¼–å†™çš„ï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹jeståªè¯†åˆ«jsæ–‡ä»¶çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹tsè¿›è¡Œè½¬è¯‘è®©jestè¯†åˆ«</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.config.js</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  transform</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">^.+</span><span style="color:#BABED8;">\\\\</span><span style="color:#FFCB6B;">.(ts|tsx|js|jsx)$</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">      &quot;</span><span style="color:#C3E88D;">babel-jest</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      {</span></span>
<span class="line"><span style="color:#BABED8;">        presets</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#676E95;font-style:italic;">/* å…¶å®ƒ... */</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/preset-typescript</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#89DDFF;">      },</span></span>
<span class="line"><span style="color:#89DDFF;">    ],</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>éœ€è¦å®‰è£…å¯¹åº”çš„<code>@babel/preset-typescript</code>ï¼›é™¤äº†ä½¿ç”¨tsè½¬ä¹‰å™¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code>ts-jest</code>ç›´æ¥è¿è¡Œtsä»£ç </p><p>å¾—ç›Šäºtsçš„è½¬è¯‘æ’ä»¶å¯ä»¥è®©jestçš„æµ‹è¯•æ–‡ä»¶ï¼ˆæˆ–é…ç½®æ–‡ä»¶ï¼‰éƒ½å†™æˆtsç±»å‹çš„ï¼Œè€Œåœ¨tsæ–‡ä»¶ä¸­å¯¹äºä¸è¯†åˆ«çš„jestå·¥å…·ä¼šæŠ¥é”™æˆ–è€…æ²¡æœ‰æç¤ºï¼Œå®‰è£…jestçš„ç±»å‹æ–‡ä»¶åŒ…<code>@types/jest</code>æ¥å‘Šè¯‰tså¯¹åº”çš„jestç±»å‹ï¼Œç„¶åè¿›è¡Œé…ç½®ï¼š</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// tsconfig.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">types</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jest</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>è½¬æ¢jsxï¼šå‡å¦‚é¡¹ç›®ä¸­ä½¿ç”¨äº†jsxé‚£ä¹ˆä¹Ÿè¦å¯¹jsxè¿›è¡Œè½¬ä¹‰ï¼Œè¿™é‡Œä»¥vue jsxä¸ºä¾‹</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  transform</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">^.+</span><span style="color:#BABED8;">\\\\</span><span style="color:#FFCB6B;">.(ts|tsx|js|jsx)$</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">      &quot;</span><span style="color:#C3E88D;">babel-jest</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        // çœç•¥å…¶ä»–</span></span>
<span class="line"><span style="color:#BABED8;">        plugins</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@vue/babel-plugin-jsx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#89DDFF;">      },</span></span>
<span class="line"><span style="color:#89DDFF;">    ],</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol><h3 id="åŸºæœ¬æ–­è¨€" tabindex="-1">åŸºæœ¬æ–­è¨€ <a class="header-anchor" href="#åŸºæœ¬æ–­è¨€" aria-label="Permalink to &quot;åŸºæœ¬æ–­è¨€&quot;">â€‹</a></h3><p>åŸºæœ¬ç¯å¢ƒé…ç½®å¥½åï¼Œå°±åˆ°äº†æµ‹è¯•çš„æ—¶é—´äº†ï¼Œæˆ‘ä»¬å…ˆæ¥æœ€ç®€å•çš„é…ç½®ç”¨èµ·</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> sum</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">src/utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ç¬¬ä¸€ä¸ªæµ‹è¯•</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">åˆ†ç»„1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">    expect</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">sum</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;"> 2</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">3</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æˆ–è€…ä¸ç”¨åˆ†ç»„</span></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ç¬¬ä¸€ä¸ªæµ‹è¯•</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  expect</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">sum</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;"> 2</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">3</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>è¿™é‡Œä»‹ç»ä¸‹å‡ ä¸ªå…³é”®å­—åŸºæœ¬æ¦‚å¿µï¼š</p><ul><li>describeï¼šç”¨æ¥æè¿°å½“å‰æµ‹è¯•çš„æ•´ä½“å†…å®¹</li><li>itï¼šç”¨æ¥åˆ†ç»„æµ‹è¯•</li><li>testï¼šç”¨æ¥æè¿°å½“å‰æµ‹è¯•ï¼Œæ— åˆ†ç»„</li><li>expectï¼šåˆ¤æ–­å‚æ•°çš„å€¼ï¼Œå…¶çš„è¿”å›å€¼æœ‰å¤šä¸ªæ–­è¨€æ–¹æ³•ï¼Œä¸Šé¢ä½¿ç”¨äº†<code>toBe</code>ä¹Ÿå°±æ˜¯ç­‰äºçš„æ„æ€ã€‚é™¤äº†æ¬¡æ­¤æ–­è¨€æœ‰å¾ˆå¤šæ–­è¨€çš„æ¡ä»¶ï¼Œä½ å¯ä»¥<a href="https://jestjs.io/docs/expect" target="_blank" rel="noreferrer">ç‚¹å‡»è¿™é‡Œé˜…è¯»å®˜æ–¹æ–‡æ¡£</a></li></ul><h4 id="æ‰§è¡Œæµ‹è¯•" tabindex="-1">æ‰§è¡Œæµ‹è¯• <a class="header-anchor" href="#æ‰§è¡Œæµ‹è¯•" aria-label="Permalink to &quot;æ‰§è¡Œæµ‹è¯•&quot;">â€‹</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ç°åœ¨packageä¸­é…ç½® jest è„šæœ¬ï¼Œç„¶åæ‰§è¡Œæµ‹è¯•</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm run test # npx jest</span></span>
<span class="line"><span style="color:#FFCB6B;"> PASS</span><span style="color:#C3E88D;">  __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#FFCB6B;">  ç¬¬ä¸€ä¸ªæµ‹è¯•</span></span>
<span class="line"><span style="color:#FFCB6B;">    âœ“</span><span style="color:#C3E88D;"> åˆ†ç»„1 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">2</span><span style="color:#C3E88D;"> ms</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">File</span><span style="color:#89DDFF;">      |</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Stmts </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Branch </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Funcs </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Lines </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> Uncovered</span><span style="color:#C3E88D;"> Line #s </span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">All</span><span style="color:#C3E88D;"> files </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">      100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#BABED8;">                   </span></span>
<span class="line"><span style="color:#FFCB6B;"> utils.ts</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">      100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#BABED8;">                   </span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">Test</span><span style="color:#C3E88D;"> Suites: </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> passed, </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Tests:</span><span style="color:#F78C6C;">       1</span><span style="color:#C3E88D;"> passed, </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Snapshots:</span><span style="color:#F78C6C;">   0</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Time:</span><span style="color:#F78C6C;">        0.519</span><span style="color:#C3E88D;"> s</span></span>
<span class="line"><span style="color:#FFCB6B;">Ran</span><span style="color:#C3E88D;"> all test suites.</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ¨</span><span style="color:#C3E88D;">  Done in </span><span style="color:#F78C6C;">1.02</span><span style="color:#C3E88D;">s.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶ã€åˆ†ç»„ä»¥åŠæµ‹è¯•è¦†ç›–ç‡</p><h3 id="è·¯å¾„æ˜ å°„" tabindex="-1">è·¯å¾„æ˜ å°„ <a class="header-anchor" href="#è·¯å¾„æ˜ å°„" aria-label="Permalink to &quot;è·¯å¾„æ˜ å°„&quot;">â€‹</a></h3><p>ä¸Šé¢åœ¨æµ‹è¯•ä»£ç æ—¶ä¼šå…ˆå¼•å…¥å¯¹åº”çš„å·¥å…·ä»£ç ï¼Œå¦‚æœéƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•å…¥ä¼šæ˜¾å¾—å¾ˆéº»çƒ¦ã€‚åœ¨é¡¹ç›®ä¸­é€šå¸¸éƒ½å–œæ¬¢ä½¿ç”¨<code>@</code>è¿™ç§æ–¹å¼å¼•å…¥æ–‡ä»¶ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å’Œé¡¹ç›®ä¸­çš„æ–‡ä»¶è·¯å¾„ä¿æŒä¸€è‡´</p><p>é…ç½®è·¯å¾„æ˜ å°„éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol><li>jestè¯†åˆ«è·¯å¾„æ˜ å°„</li><li>tsè¯†åˆ«è·¯å¾„æ˜ å°„ï¼ˆå¦‚æœé¡¹ç›®ä¸­ç”¨äº†tsï¼‰</li></ol><h4 id="é…ç½®jestè·¯å¾„æ˜ å°„" tabindex="-1">é…ç½®jestè·¯å¾„æ˜ å°„ <a class="header-anchor" href="#é…ç½®jestè·¯å¾„æ˜ å°„" aria-label="Permalink to &quot;é…ç½®jestè·¯å¾„æ˜ å°„&quot;">â€‹</a></h4><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#FFCB6B;">  moduleNameMapper</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">@/(.*)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;rootDir&gt;/src/$1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="é…ç½®tsconfig" tabindex="-1">é…ç½®tsconfig <a class="header-anchor" href="#é…ç½®tsconfig" aria-label="Permalink to &quot;é…ç½®tsconfig&quot;">â€‹</a></h4><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// tsconfig.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">paths</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">@/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">src/*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">   }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™æ ·åœ¨æµ‹è¯•æ–‡ä»¶ä¸­å°±å¯ä»¥ä½¿ç”¨è·¯å¾„æ˜ å°„é™ä½å¿ƒæ™ºè´Ÿæ‹…</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> sum</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>é™¤äº†æ‰‹åŠ¨è®¾ç½®å¤–è¿˜å¯ä»¥å°†tsconfigä¸­çš„pathç›´æ¥ä½œä¸ºè·¯å¾„æ˜ å°„ï¼Œè¿™æ ·å°±å‡å°‘äº†å¤šå¤„çš„ä¿®æ”¹ã€‚å®ç°è¿™ä¸€åŠŸèƒ½éœ€è¦å€ŸåŠ©<code>ts-jest</code>å·¥å…·åŒ…ï¼Œä¸åŒè¿™ä¸ªè‡ªå·±ä¹Ÿå¯ä»¥å†™ä¸ªé€»è¾‘å®ç°</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.config.ts</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> pathsToModuleNameMapper </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ts-jest/utils</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> compilerOptions </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./tsconfig</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">  moduleNameMapper</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> pathsToModuleNameMapper</span><span style="color:#BABED8;">(compilerOptions</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">paths</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">    prefix</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">&lt;rootDir&gt;/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="domæµ‹è¯•" tabindex="-1">domæµ‹è¯• <a class="header-anchor" href="#domæµ‹è¯•" aria-label="Permalink to &quot;domæµ‹è¯•&quot;">â€‹</a></h3><p>jestæ”¯æŒæµè§ˆå™¨ç¯å¢ƒï¼Œä½¿ç”¨æµè§ˆå™¨ç¯å¢ƒæ—¶éœ€è¦å®‰è£…å¯¹åº”çš„åŒ…ï¼Œè¯·æ ¹æ®ç‰ˆæœ¬å¯ä»¥é€‰æ‹©<code>jsdom</code>æˆ–<code>jest-environment-jsdom</code>åŒ…è¿›è¡Œå®‰è£…ï¼Œè¿™é‡Œjestç‰ˆæœ¬ä¸º<code>28+</code>ä½¿ç”¨åè€…ã€‚æµ‹è¯•æ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ç¬¬ä¸€ä¸ªæµ‹è¯•</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">åˆ†ç»„1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // ä½¿ç”¨ localStorage API</span></span>
<span class="line"><span style="color:#BABED8;">    localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">    expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItem</span><span style="color:#F07178;">((</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)))</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm run test</span></span>
<span class="line"><span style="color:#FFCB6B;">PASS</span><span style="color:#C3E88D;">  __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#FFCB6B;">  ç¬¬ä¸€ä¸ªæµ‹è¯•</span></span>
<span class="line"><span style="color:#FFCB6B;">    âœ“</span><span style="color:#C3E88D;"> åˆ†ç»„1 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">2</span><span style="color:#C3E88D;"> ms</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">File</span><span style="color:#89DDFF;">      |</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Stmts </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Branch </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Funcs </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Lines </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> Uncovered</span><span style="color:#C3E88D;"> Line #s </span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">All</span><span style="color:#C3E88D;"> files </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">       0</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">        0</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">       0</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">       0</span><span style="color:#89DDFF;"> |</span><span style="color:#BABED8;">                   </span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">Test</span><span style="color:#C3E88D;"> Suites: </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> passed, </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Tests:</span><span style="color:#F78C6C;">       1</span><span style="color:#C3E88D;"> passed, </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Snapshots:</span><span style="color:#F78C6C;">   0</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Time:</span><span style="color:#F78C6C;">        0.701</span><span style="color:#C3E88D;"> s, estimated </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> s</span></span>
<span class="line"><span style="color:#FFCB6B;">Ran</span><span style="color:#C3E88D;"> all test suites.</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ¨</span><span style="color:#C3E88D;">  Done in </span><span style="color:#F78C6C;">1.13</span><span style="color:#C3E88D;">s.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="å¼‚æ­¥æµ‹è¯•" tabindex="-1">å¼‚æ­¥æµ‹è¯• <a class="header-anchor" href="#å¼‚æ­¥æµ‹è¯•" aria-label="Permalink to &quot;å¼‚æ­¥æµ‹è¯•&quot;">â€‹</a></h3><p>jestå¯ä»¥ä½¿ç”¨å¤šç§æ–¹å¼è¿›è¡Œå¼‚æ­¥ä»£ç æµ‹è¯•ï¼Œé€šå¸¸ä½¿ç”¨promiseã€asyncå°±å¯ä»¥äº†</p><ol><li>ä½¿ç”¨promise</li><li>async/await</li><li>å›è°ƒ</li></ol><p>è¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œé€šè¿‡ä¸Šé¢çš„ä¸‰ç§æ–¹å¼è¿›è¡Œæµ‹è¯•</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// src/utils</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> getUser</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">name</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> string</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">  return</span><span style="color:#89DDFF;"> new</span><span style="color:#FFCB6B;"> Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">resolve</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">    setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#82AAFF;"> resolve</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">name</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;"> 1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="ä½¿ç”¨promise" tabindex="-1">ä½¿ç”¨Promise <a class="header-anchor" href="#ä½¿ç”¨promise" aria-label="Permalink to &quot;ä½¿ç”¨Promise&quot;">â€‹</a></h4><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> getUser</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æµ‹è¯•å¼‚æ­¥ä»£ç </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">promiseè°ƒç”¨æ–¹å¼æµ‹è¯•</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> user</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">å°æ˜</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // ä½¿ç”¨then</span></span>
<span class="line"><span style="color:#82AAFF;">    getUser</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">user</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">      expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">user</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">  it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ä½¿ç”¨resolvesæµ‹è¯•promise</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> user</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">å°æ</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // ä½¿ç”¨ .resolves æ–¹å¼ï¼Œæ³¨æ„è¿™é‡Œè¦ return</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#82AAFF;"> expect</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">getUser</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">user</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">resolves</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">user</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="ä½¿ç”¨asyncæµ‹è¯•" tabindex="-1">ä½¿ç”¨asyncæµ‹è¯• <a class="header-anchor" href="#ä½¿ç”¨asyncæµ‹è¯•" aria-label="Permalink to &quot;ä½¿ç”¨asyncæµ‹è¯•&quot;">â€‹</a></h4><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> getUser</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æµ‹è¯•å¼‚æ­¥ä»£ç </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ä½¿ç”¨asyncæµ‹è¯•</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;"> async</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> user</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">å°æ˜</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">    const</span><span style="color:#BABED8;"> res</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> getUser</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">user</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">user</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="ä½¿ç”¨å›è°ƒå‡½æ•°" tabindex="-1">ä½¿ç”¨å›è°ƒå‡½æ•° <a class="header-anchor" href="#ä½¿ç”¨å›è°ƒå‡½æ•°" aria-label="Permalink to &quot;ä½¿ç”¨å›è°ƒå‡½æ•°&quot;">â€‹</a></h4><p>å›è°ƒå‡½æ•°é»˜è®¤é€šå¸¸æ˜¯ä»¥å‰é‚£ç§å›è°ƒå†™æ³•ï¼Œè¿™é‡Œéœ€è¦å¯¹ä»¥ä¸Šçš„å¼‚æ­¥å‡½æ•°è¿›è¡Œè°ƒæ•´ï¼Œè®©å…¶æ¢æˆå›è°ƒå‡½æ•°æ¨¡å¼</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// æ¥å—ä¸€ä¸ªcbï¼Œè¿™é‡Œå›ºå®šè¿”å›çš„å€¼ä¸ºtrueï¼Œæ²¡æœ‰é”™è¯¯</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> getUser</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">cb</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">error</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> any</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> data</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> any</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#FFCB6B;"> void</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">    cb</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null,</span><span style="color:#FF9CAC;"> true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span><span style="color:#F78C6C;"> 500</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å®šä¹‰æµ‹è¯•</span></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æµ‹è¯•å¼‚æ­¥ä»£ç </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ä½¿ç”¨å›è°ƒå‡½æ•°</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">done</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">    function</span><span style="color:#82AAFF;"> cb</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">error</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> any</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> data</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> any</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">error</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#82AAFF;">        done</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">error</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      }</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      try</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">        expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">data</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">        done</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      }</span><span style="color:#89DDFF;font-style:italic;"> catch</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#82AAFF;">        done</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">err</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;"> // è¿™é‡Œä¸€å®šè¦ä½¿ç”¨try catchï¼Œé˜²æ­¢å‡ºé”™æ—¶æ²¡æœ‰æ‰§è¡Œdone</span></span>
<span class="line"><span style="color:#89DDFF;">      }</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#82AAFF;">    getUser</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">cb</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>å›è°ƒæ¨¡å¼ä¸€å®šè¦æ‰§è¡Œ<code>done</code>å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œåˆ™ä¼šè¢«è®¤ä¸ºè¶…æ—¶é”™è¯¯</p><h3 id="æ¨¡æ‹Ÿå‡½æ•°" tabindex="-1">æ¨¡æ‹Ÿå‡½æ•° <a class="header-anchor" href="#æ¨¡æ‹Ÿå‡½æ•°" aria-label="Permalink to &quot;æ¨¡æ‹Ÿå‡½æ•°&quot;">â€‹</a></h3><p>å‡è®¾è¦æ¨¡æ‹Ÿä¸€ä¸ªå·¥å…·å‡½æ•°çš„å†…éƒ¨å®ç°ï¼Œå¯ä»¥ä½¿ç”¨mockå‡½æ•°æ¥åˆ¤æ–­å‡½æ•°å†…éƒ¨çš„å€¼æ˜¯å¦è¾¾åˆ°é¢„æœŸ</p><p>å®šä¹‰ä¸ªå¾…æµ‹è¯•çš„å‡½æ•°forEach</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> forEach</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">items</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> number</span><span style="color:#BABED8;">[]</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> callback</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">num</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> number</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#FFCB6B;"> void</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">  for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#BABED8;"> index</span><span style="color:#89DDFF;"> =</span><span style="color:#F78C6C;"> 0</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> index</span><span style="color:#89DDFF;"> &lt;</span><span style="color:#BABED8;"> items</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">length</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> index</span><span style="color:#89DDFF;">++</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#82AAFF;">    callback</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">items</span><span style="color:#F07178;">[</span><span style="color:#BABED8;">index</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ·»åŠ æµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> forEach</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ¨¡æ‹Ÿå‡½æ•°</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> mockFn </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> jest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fn</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> number</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#BABED8;"> x </span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;"> 1</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æ¨¡æ‹Ÿå‡½æ•°</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  forEach</span><span style="color:#F07178;">([</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;"> 1</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> mockFn</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">  expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">mockFn</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">mock</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">calls</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toHaveLength</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">  expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">mockFn</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">mock</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">calls</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">][</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">  expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">mockFn</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">mock</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">calls</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">][</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">  expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">mockFn</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">mock</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">results</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æ›´å¤šå…³äºæ¨¡æ‹Ÿå‡½æ•°çš„ä¾‹å­è¯·<a href="https://jestjs.io/zh-Hans/docs/mock-functions" target="_blank" rel="noreferrer">æŸ¥çœ‹æ–‡æ¡£</a> å’Œ <a href="https://jestjs.io/zh-Hans/docs/mock-function-api" target="_blank" rel="noreferrer">API</a></p><h3 id="å®šæ—¶å™¨" tabindex="-1">å®šæ—¶å™¨ <a class="header-anchor" href="#å®šæ—¶å™¨" aria-label="Permalink to &quot;å®šæ—¶å™¨&quot;">â€‹</a></h3><p>Jestå¯ä»¥é€šè¿‡ä¸€ä¸ªå‡½æ•°è½¬æ¢è®¡æ—¶å™¨ä»¥ä¾¿å…è®¸ä½ æ§åˆ¶æ—¶é—´æµé‡</p><p>å‡è®¾æµ‹è¯•å¦‚ä¸‹å®šæ—¶å™¨ä»£ç ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> useTimer</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">cb</span><span style="color:#89DDFF;">?:</span><span style="color:#FFCB6B;"> Function</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#BABED8;"> cb</span><span style="color:#89DDFF;"> &amp;&amp;</span><span style="color:#82AAFF;"> cb</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;"> 1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> useTimer</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">jest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useFakeTimers</span><span style="color:#BABED8;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">jest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">spyOn</span><span style="color:#BABED8;">(global</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">setTimeout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test timer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">  const</span><span style="color:#BABED8;"> cb</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> jest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fn</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">  useTimer</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">cb</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">  expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">cb</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">not</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBeCalled</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // æ‰§è¡Œæ‰€æœ‰çš„å®šæ—¶å™¨</span></span>
<span class="line"><span style="color:#BABED8;">  jest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">runAllTimers</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">  expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">cb</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBeCalled</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ›´å¤šè§<a href="https://jestjs.io/docs/timer-mocks" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="setupé…ç½®" tabindex="-1">setupé…ç½® <a class="header-anchor" href="#setupé…ç½®" aria-label="Permalink to &quot;setupé…ç½®&quot;">â€‹</a></h3><p>å†™æµ‹è¯•çš„æ—¶å€™ä½ ç»å¸¸éœ€è¦åœ¨è¿è¡Œæµ‹è¯•å‰åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œå’Œåœ¨è¿è¡Œæµ‹è¯•åè¿›è¡Œä¸€äº›æ”¶å°¾å·¥ä½œã€‚ Jest æä¾›è¾…åŠ©å‡½æ•°æ¥å¤„ç†è¿™ä¸ªé—®é¢˜</p><p>è¿™å…¶ä¸­åŒ…æ‹¬beforeEachã€afterEachã€beforeAllã€afterAllï¼Œå…¶ä¸­å‰ä¸¤è€…åœ¨æ¯ä¸ªæµ‹è¯•å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåè€…åœ¨æ–‡ä»¶ä¸­åªä¼šæ‰§è¡Œä¸€æ¬¡</p><h3 id="è¦†ç›–ç‡" tabindex="-1">è¦†ç›–ç‡ <a class="header-anchor" href="#è¦†ç›–ç‡" aria-label="Permalink to &quot;è¦†ç›–ç‡&quot;">â€‹</a></h3><p>é™¤äº†å¯¹ç¨‹åºè¿›è¡Œæ–­è¨€å¤–ï¼Œjestè¿˜æ”¶é›†ä»£ç çš„æµ‹è¯•è¦†ç›–ç‡å¹¶ç”Ÿæˆå¯¹åº”çš„æŠ¥å‘Šï¼ŒåŒ…æ‹¬ï¼šæŸä¸ªå‡½æ•°å†…éƒ¨çš„æµ‹è¯•è¦†ç›–ç‡ã€æ•´ä¸ªæ–‡ä»¶çš„è¦†ç›–ç‡ï¼Œè¦æƒ³è¾¾åˆ°è¦†ç›–ç‡100%ï¼Œå°±è¦æµ‹è¯•åˆ°æ¯ä¸ªæ–‡ä»¶çš„æ‰€æœ‰ä»£ç ã€æ¯ä¸ªå‡½æ•°å†…éƒ¨çš„æ‰€æœ‰åˆ†æ”¯æ¡ä»¶</p><h4 id="å¼€å¯è¦†ç›–ç‡" tabindex="-1">å¼€å¯è¦†ç›–ç‡ <a class="header-anchor" href="#å¼€å¯è¦†ç›–ç‡" aria-label="Permalink to &quot;å¼€å¯è¦†ç›–ç‡&quot;">â€‹</a></h4><p>å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.config.ts</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä¸»è¦æ¶‰åŠåˆ°è¿™ä¸¤ä¸ªé…ç½®</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">  collectCoverage</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // å¯ç”¨</span></span>
<span class="line"><span style="color:#F07178;">  coverageDirectory</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">coverage</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // æŠ¥å‘Šç”Ÿæˆä½ç½®</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>é€šè¿‡cliï¼Œæ‰§è¡Œè„šæœ¬æ—¶å¸¦ä¸Šå‚æ•°</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npx jest --coverage</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="æµ‹è¯•è¦†ç›–ç‡" tabindex="-1">æµ‹è¯•è¦†ç›–ç‡ <a class="header-anchor" href="#æµ‹è¯•è¦†ç›–ç‡" aria-label="Permalink to &quot;æµ‹è¯•è¦†ç›–ç‡&quot;">â€‹</a></h4><p>å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªå‡½æ•°</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#C792EA;"> function</span><span style="color:#82AAFF;"> whatType</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> any</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">  const</span><span style="color:#BABED8;"> type</span><span style="color:#89DDFF;"> =</span><span style="color:#FFCB6B;"> Object</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">toString</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">arg</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">  if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">type</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">[object String]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">type</span><span style="color:#89DDFF;"> ===</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">[object Boolean]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">boolean</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ·»åŠ æµ‹è¯•ç”¨ä¾‹</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> whatType</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æµ‹è¯•è¦†ç›–ç‡</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">å‡½æ•°æ¡ä»¶è¦†ç›–ç‡</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">    expect</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">whatType</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">boolean</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm run test</span></span>
<span class="line"><span style="color:#FFCB6B;"> PASS</span><span style="color:#C3E88D;">  __tests__/demo.spec.ts</span></span>
<span class="line"><span style="color:#FFCB6B;">  æµ‹è¯•è¦†ç›–ç‡</span></span>
<span class="line"><span style="color:#FFCB6B;">    âœ“</span><span style="color:#C3E88D;"> å‡½æ•°æ¡ä»¶è¦†ç›–ç‡ </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#C3E88D;"> ms</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">File</span><span style="color:#89DDFF;">      |</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Stmts </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Branch </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Funcs </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Lines </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> Uncovered</span><span style="color:#C3E88D;"> Line #s </span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">All</span><span style="color:#C3E88D;"> files </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">   96.77</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">       50</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">   96.77</span><span style="color:#89DDFF;"> |</span><span style="color:#BABED8;">                   </span></span>
<span class="line"><span style="color:#FFCB6B;"> index.ts</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">   96.77</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">       50</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">   96.77</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> 4</span><span style="color:#BABED8;">                 </span></span>
<span class="line"><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">Test</span><span style="color:#C3E88D;"> Suites: </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> passed, </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Tests:</span><span style="color:#F78C6C;">       1</span><span style="color:#C3E88D;"> passed, </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Snapshots:</span><span style="color:#F78C6C;">   0</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Time:</span><span style="color:#F78C6C;">        0.486</span><span style="color:#C3E88D;"> s, estimated </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> s</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>Fileï¼šæµ‹è¯•çš„æ–‡ä»¶</li><li>Stmtsï¼šæµ‹è¯•ä¸­è¢«æ‰§è¡Œçš„ä»£ç è¯­å¥çš„æ¯”ä¾‹</li><li>Branchï¼šæµ‹è¯•ä»£ç æ¡ä»¶åˆ†æ”¯æ¯”ä¾‹</li><li>Funcsï¼šæµ‹è¯•ä¸­è¢«æ‰§è¡Œå‡½æ•°æ¯”ä¾‹</li><li>Linesï¼šæµ‹è¯•ä¸­è¢«æ‰§è¡Œä»£ç è¡Œæ•°æ¯”ä¾‹</li><li>Uncovered Lineï¼šæ²¡æœ‰æµ‹è¯•åˆ°çš„è¡Œæ•°</li></ul><p>é™¤äº†æŸ¥çœ‹ç»ˆç«¯çš„è¡¨æ ¼å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ›´ç›´è§‚çš„æŠ¥å‘Šï¼Œæ–‡ä»¶æŠ¥å‘Šçš„ç»“æ„å¤§æ¦‚å¦‚ä¸‹ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">coverage</span></span>
<span class="line"><span style="color:#FFCB6B;">â”œâ”€â”€</span><span style="color:#C3E88D;"> clover.xml # xmlæ ¼å¼</span></span>
<span class="line"><span style="color:#FFCB6B;">â”œâ”€â”€</span><span style="color:#C3E88D;"> coverage-final.json # jsonæ ¼å¼</span></span>
<span class="line"><span style="color:#FFCB6B;">â”œâ”€â”€</span><span style="color:#C3E88D;"> lcov-report # htmlæ ¼å¼</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ base.css</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ block-navigation.js</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ favicon.png</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ index.html # ä¸»é¡µé¢å…¥å£</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ index.ts.html</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ other.ts.html</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ prettify.css</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ prettify.js</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”œâ”€â”€ sort-arrow-sprite.png</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â””â”€â”€ sorter.js</span></span>
<span class="line"><span style="color:#FFCB6B;">â””â”€â”€</span><span style="color:#C3E88D;"> lcov.info</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ä¸€èˆ¬éƒ½æ¥æŸ¥çœ‹HTMLæŠ¥å‘Šï¼Œæ‰“å¼€æŠ¥å‘Šé¡µé¢</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230817113856297.png" alt=""></p><p>å¯ä»¥ç‚¹å‡»å¯¹åº”çš„æ–‡ä»¶æŸ¥çœ‹æ›´è¯¦ç»†çš„æŠ¥å‘Š</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230817113942295.png" alt=""></p><h3 id="vueç»„ä»¶æµ‹è¯•" tabindex="-1">Vueç»„ä»¶æµ‹è¯• <a class="header-anchor" href="#vueç»„ä»¶æµ‹è¯•" aria-label="Permalink to &quot;Vueç»„ä»¶æµ‹è¯•&quot;">â€‹</a></h3><p>jestä¹Ÿå¯ä»¥å¯¹vueç»„ä»¶è¿›è¡Œæµ‹è¯•ï¼Œvueå®˜æ–¹æä¾›äº† <a href="https://v1.test-utils.vuejs.org/zh/" target="_blank" rel="noreferrer">vue2ç‰ˆæœ¬å·¥å…·åŒ…(vue-test)</a> å’Œ <a href="https://test-utils.vuejs.org/guide/" target="_blank" rel="noreferrer">vue3ç‰ˆæœ¬å·¥å…·åŒ…(@vue/test-utils)</a>ï¼Œè¿™é‡ŒåŸºäºvue3ç»„ä»¶è¿›è¡Œæµ‹è¯•</p><p>å®‰è£…å¯¹åº”çš„ä¾èµ–ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm install @vue/test-utils -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯¹äºJestv28+ä»¥ä¸Šç‰ˆæœ¬è¿˜éœ€è¦æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">  testEnvironmentOptions</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">    customExportConditions</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">node-addons</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>åˆ›å»ºä¸€ä¸ªç®€å•çš„Buttonç»„ä»¶ï¼š</p><div class="language-tsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> defineComponent</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#82AAFF;"> defineComponent</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  render</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> &lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;">æŒ‰é’®</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æ·»åŠ æµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> mount</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@vue/test-utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> Button </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/components/Button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">test</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æµ‹è¯•vueç»„ä»¶</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#C792EA;">  const</span><span style="color:#BABED8;"> wrapper</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> mount</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    setup</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      return</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#F07178;"> &lt;</span><span style="color:#FFCB6B;">Button</span><span style="color:#F07178;"> /&gt;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      };</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">  expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">wrapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">text</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æŒ‰é’®</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>è¿è¡Œæµ‹è¯•</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm run test</span></span>
<span class="line"><span style="color:#FFCB6B;"> PASS</span><span style="color:#C3E88D;">  __tests__/demo.spec.tsx</span></span>
<span class="line"><span style="color:#FFCB6B;">  âœ“</span><span style="color:#C3E88D;"> æµ‹è¯•vueç»„ä»¶ </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">9</span><span style="color:#C3E88D;"> ms</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">------------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">File</span><span style="color:#89DDFF;">        |</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Stmts </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Branch </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Funcs </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> %</span><span style="color:#C3E88D;"> Lines </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> Uncovered</span><span style="color:#C3E88D;"> Line #s </span></span>
<span class="line"><span style="color:#FFCB6B;">------------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">All</span><span style="color:#C3E88D;"> files   </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">      100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#BABED8;">                   </span></span>
<span class="line"><span style="color:#FFCB6B;"> Button.tsx</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">      100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;">     100</span><span style="color:#89DDFF;"> |</span><span style="color:#BABED8;">                   </span></span>
<span class="line"><span style="color:#FFCB6B;">------------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">----------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">---------</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">-------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">Test</span><span style="color:#C3E88D;"> Suites: </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> passed, </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Tests:</span><span style="color:#F78C6C;">       1</span><span style="color:#C3E88D;"> passed, </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Snapshots:</span><span style="color:#F78C6C;">   0</span><span style="color:#C3E88D;"> total</span></span>
<span class="line"><span style="color:#FFCB6B;">Time:</span><span style="color:#F78C6C;">        0.633</span><span style="color:#C3E88D;"> s</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æ·»åŠ å…¨å±€ç»„ä»¶ï¼Œå½“å•æµ‹æŸä¸ªç»„ä»¶æ—¶ï¼Œç»„ä»¶å†…éƒ¨å¼•ç”¨çš„å…¶å®ƒç»„ä»¶ä¼šå› ä¸ºæ²¡æœ‰å¼•ç”¨è€ŒæŠ¥é”™ï¼Œå®šä¹‰å…¨å±€ç»„ä»¶å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.setup.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> config</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@vue/test-utils</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> Button </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/button/src/button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> Icon </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">@/button/src/icon</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">config</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">global</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">components </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">  Button</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  Icon</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>é…ç½®jest</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// jest.config.ts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#89DDFF;font-style:italic;"> default</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">  setupFiles</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;rootDir&gt;/jest.setup.ts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™é‡Œä¸å¯¹vueå·¥å…·åŒ…APIè¿‡å¤šçš„è§£é‡Šï¼Œæ›´å¤šçš„APIä½¿ç”¨å¯ä»¥æŸ¥çœ‹<a href="https://test-utils.vuejs.org/installation/" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£</a>ï¼Œvue2ç‰ˆæœ¬çš„å¯ä»¥<a href="https://v1.test-utils.vuejs.org/zh/" target="_blank" rel="noreferrer">æŸ¥çœ‹è¿™é‡Œ</a></p><h2 id="ç«¯åˆ°ç«¯æµ‹è¯•-cypress" tabindex="-1">ç«¯åˆ°ç«¯æµ‹è¯• - Cypress <a class="header-anchor" href="#ç«¯åˆ°ç«¯æµ‹è¯•-cypress" aria-label="Permalink to &quot;ç«¯åˆ°ç«¯æµ‹è¯• - Cypress&quot;">â€‹</a></h2><p>è¿™é‡Œé€‰æ‹©Cypressä½œä¸ºç«¯æµ‹æ¡†æ¶ï¼Œ<a href="https://docs.cypress.io/guides/overview/why-cypress" target="_blank" rel="noreferrer">Cypress</a> æ˜¯ä¸€ä¸ªç”¨äºå‰ç«¯ç«¯åˆ°ç«¯ï¼ˆEnd-to-Endï¼ŒE2Eï¼‰æµ‹è¯•çš„å¼€æºæµ‹è¯•æ¡†æ¶ã€‚å®ƒè¢«è®¾è®¡ç”¨äºå¯¹ Web åº”ç”¨ç¨‹åºè¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·ä¸åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’çš„è¡Œä¸ºï¼Œå¹¶éªŒè¯åº”ç”¨ç¨‹åºçš„åŠŸèƒ½å’Œç”¨æˆ·ä½“éªŒ</p><h3 id="å®‰è£…ä½¿ç”¨" tabindex="-1">å®‰è£…ä½¿ç”¨ <a class="header-anchor" href="#å®‰è£…ä½¿ç”¨" aria-label="Permalink to &quot;å®‰è£…ä½¿ç”¨&quot;">â€‹</a></h3><p>ä½ å¯ä»¥é€‰æ‹©è‡ªå·±çš„npmåŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm install cypress -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é…ç½®npmè„šæœ¬æ‰“å¼€cypress</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	&quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">		&quot;</span><span style="color:#FFCB6B;">test:e2e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">cypress open</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">	}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æˆ–è€…ç›´æ¥ä½¿ç”¨<code>./node_modules/.bin/cypress open</code>ã€‚å¯åŠ¨åå‡ºå¼¹å‡ºcypressçš„ç•Œé¢ï¼Œå¯ä»¥è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•å’Œç»„ä»¶æµ‹è¯•ã€‚ä»ä¸‹å›¾ç•Œé¢å¯ä»¥çœ‹å‡ºä¸ç®¡æ˜¯ç«¯æµ‹è¿˜æ˜¯ç»„ä»¶æµ‹è¯•éƒ½æ²¡æœ‰é…ç½®ï¼ˆNot Configuredï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ä¸ªç«¯åˆ°ç«¯æµ‹è¯•ï¼š</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230818191548472.png" alt=""></p><p>è¿›å»åç”±äºæ˜¯åˆæ¬¡ä½¿ç”¨cypressä¼šå¼•å¯¼å¯¹é¡¹ç›®åšåˆå§‹åŒ–é…ç½®ï¼Œç‚¹å‡»<code>Continue</code>ä¼šåœ¨é¡¹ç›®ä¸­ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶ï¼š</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230818191606558.png" alt=""></p><p>ç«¯åˆ°ç«¯æµ‹è¯•cypressä¼šæ£€æµ‹æœ¬åœ°è®¡ç®—æœºå®‰è£…çš„æµè§ˆå™¨ï¼Œä½ å¯ä»¥é€‰æ‹©è¦ç”¨å“ªä¸ªæµè§ˆå™¨è¿›è¡Œæµ‹è¯•ï¼Œæˆ–è€…ä½¿ç”¨electronã€‚è¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨electron</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230818091537963.png" alt=""></p><p>è¿›æ¥åå°±åˆ°äº†æµ‹è¯•ç”¨ä¾‹ç•Œé¢ï¼Œåˆæ¬¡ä¸‹è½½ä¸ä¼šæœ‰ä»»ä½•æµ‹è¯•ç”¨ä¾‹çš„ã€‚ç•Œé¢ä¼šå¼•å¯¼ä½ å»åˆ›å»ºç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå·¦ä¾§ç”¨æ¥ç”Ÿæˆå®˜æ–¹çš„æµ‹è¯•ä¾‹å­ï¼Œå…¶å¯ä»¥ä½œä¸ºç”¨ä¾‹çš„å‚è€ƒï¼›å³ä¾§è‡ªå·±æ¥åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼Œåˆæ¬¡ä½¿ç”¨æˆ‘ä»¬å…ˆç‚¹å‡»ç”Ÿæˆå®˜æ–¹ä¾‹å­ï¼š</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230818191656793.png" alt=""></p><p>ä¸‹å›¾ä¾¿æ˜¯å®˜æ–¹çš„æµ‹è¯•ä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šï¼Œå¯¹åº”çš„æ–‡ä»¶è·¯å¾„åœ¨<code>cypress/e2e</code>ä¸‹</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230818191758958.png" alt=""></p><p>è¿™äº›å•æµ‹ä¾‹å­ä¸­éšä¾¿ç‚¹å‡»ä¸€ä¸ªå°±ä¼šæµ‹è¯•å¯¹åº”çš„ç”¨ä¾‹ï¼Œè¿™é‡Œæˆ‘ä»¬ç‚¹å‡»<code>todo.cy.js</code>å°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230818191951669.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°æµ‹è¯•ç•Œé¢ä¸»è¦åŒ…å«ä¸¤å¤§æ¿å—ï¼Œå·¦ä¾§ä¸»è¦æ˜¯æµ‹è¯•æ—¥å¿—ã€ç»Ÿè®¡ã€å¿«ç…§ä¹‹ç±»ï¼Œå³ä¾§ä¾¿æ˜¯webç•Œé¢ã€‚cypressä¼šæ ¹æ®æµ‹è¯•ç”¨ä¾‹æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„æ—¥å¿—ï¼›webç•Œé¢ä¼šæ˜¾ç¤ºæ¯ä¸ªæ­¥éª¤çš„å½¢æ€ï¼Œå°±å¥½åƒæ˜¯ç”¨æˆ·åœ¨æ“ä½œä¸€æ ·</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/2023-08-18%2021.15.22.gif" alt=""></p><div class="img-title">åŠ¨å›¾æ¼”ç¤º</div><p><strong>é™¤äº†ä½¿ç”¨openæ‰“å¼€å¯¹åº”çš„ç•Œé¢å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç»ˆç«¯è¿›è¡Œæµ‹è¯•ä¸ç”¨æ‰“å¼€ç•Œé¢ï¼Œåªéœ€è¦æ‰§è¡Œ<code>cypress run</code>å‘½ä»¤å³å¯</strong></p><h3 id="é…ç½®" tabindex="-1">é…ç½® <a class="header-anchor" href="#é…ç½®" aria-label="Permalink to &quot;é…ç½®&quot;">â€‹</a></h3><p>cypressé…ç½®åŒ…æ‹¬å…¨å±€ã€ç«¯æµ‹ã€ç»„ä»¶æµ‹è¯•å‡ ä¸ªæ–¹é¢ï¼Œå¯ä»¥é€šè¿‡<code>cypress.config.js</code>é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> resolve </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> defineConfig </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cypress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> defineConfig</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // ç«¯æµ‹é…ç½®</span></span>
<span class="line"><span style="color:#F07178;">  e2e</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {},</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // ç»„ä»¶æµ‹è¯•é…ç½®</span></span>
<span class="line"><span style="color:#F07178;">  component</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {},</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  /* å…¶ä»–çš„å…¨å±€é…ç½® */</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„é…ç½®ï¼š</p><ul><li>baseUrlï¼šç«¯æµ‹è®¿é—®çš„åŸºæœ¬åœ°å€ï¼Œæ¯”å¦‚æµ‹è¯•æœ¬åœ°çš„webæœåŠ¡<code>http://localhost:8080</code>ï¼Œè¿™æ ·åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å°±å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„äº†</li><li>specPatternï¼šæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ï¼ŒåŒ…å«å•æµ‹å’Œç»„ä»¶æµ‹è¯•ï¼Œæ”¯æŒglobå½¢å¼ã€‚è¿™æ ·å°±å¯ä»¥è‡ªå®šä¹‰æµ‹è¯•ç”¨ä¾‹çš„ä½ç½®äº†</li><li>fixturesFolderï¼šç”¨æ¥å­˜æ”¾æµ‹è¯•mockæ•°æ®ï¼Œé»˜è®¤è¯»å–æ ¹è·¯å¾„ä¸‹çš„<code>cypress/fixtures</code>è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡æ­¤å±æ€§ä¿®æ”¹å¯¹åº”çš„æµ‹è¯•æ•°æ®è·¯å¾„</li><li>supportFileï¼šè‡ªå®šä¹‰å…¨å±€é…ç½®ã€åŠŸèƒ½å‡½æ•°ã€è‡ªå®šä¹‰å‘½ä»¤ã€ç¯å¢ƒå˜é‡ç­‰ç­‰ï¼Œåœ¨æ¯ä¸ªæµ‹è¯•æ–‡ä»¶æ‰§è¡Œå‰éƒ½ä¼šå…ˆåŠ è½½æ‰§è¡Œå…¨å±€çš„é…ç½®æ–‡ä»¶ã€‚é»˜è®¤çš„è·¯å¾„ä¸º<code>cypress/support/**</code>ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼Œå¦‚æœæ²¡æœ‰å…¨å±€çš„é…ç½®è¯·è®¾ç½®æˆ<code>false</code></li><li>experimentalRunAllSpecsï¼šå€¼ä¸ºtrueæ—¶æµ‹è¯•ç•Œé¢ä¼šæœ‰ä¸€ä¸ªæµ‹è¯•å…¨éƒ¨ç”¨ä¾‹çš„æŒ‰é’®ï¼Œé»˜è®¤ä¼šfalse</li><li>videoï¼šå½“æ‰§è¡Œ<code>cypress run</code>è¿›è¡Œæµ‹è¯•åç”Ÿæˆå¯¹åº”çš„è§†é¢‘æ–‡ä»¶ï¼Œè®¾ç½®æˆfalseä¸ä¼šç”Ÿæˆ</li><li>screenshotsFolderï¼šå¿«ç…§ä¿å­˜è·¯å¾„ï¼Œé»˜è®¤è·¯å¾„<code>cypress/screenshots</code></li><li>videosFolderï¼šè§†é¢‘ä¿å­˜è·¯å¾„ï¼Œé»˜è®¤è·¯å¾„<code>cypress/videos</code></li><li>screenshotOnRunFailureï¼šå½“<code>cypress run</code>å¤±è´¥æ—¶ç”Ÿæˆå¯¹åº”çš„å¿«ç…§</li><li>downloadsFolderï¼šå½“æµ‹è¯•ç”¨ä¾‹ä¸­ä¸‹è½½æ–‡ä»¶æ—¶ä¿å­˜çš„è·¯å¾„</li><li>viewportWidth / viewportHeightï¼šè®¾ç½®ç•Œé¢è§†å£å¤§å°ï¼Œå¯ä»¥æ¨¡æ‹Ÿä¸åŒå°ºå¯¸çš„å±å¹•</li></ul><p>æœ‰çš„é…ç½®å¯¹äº e2eå’ŒComponent éƒ½æœ‰ï¼Œå¯ä»¥åœ¨å…¨å±€é…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸åŒç±»å‹çš„æµ‹è¯•ä¸­è¿›è¡Œè¦†ç›–ï¼ŒåŸºæœ¬é…ç½®å°±è¯´è¿™ä¹ˆå¤šï¼Œæ›´å¤šé…ç½®å‚è€ƒğŸ‘‰ <a href="https://docs.cypress.io/guides/references/configuration" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£</a></p><p>å¤§æ¦‚çš„é…ç½®ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">root</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#FFCB6B;">â”œâ”€â”€</span><span style="color:#C3E88D;"> cypress.config.js # é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="color:#FFCB6B;">â”œâ”€â”€</span><span style="color:#C3E88D;"> cypress</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;"> 	â”œâ”€â”€ fixtures # æµ‹è¯•æ•°æ®</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">   â”‚ 	â””â”€â”€ user.json</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;"> 	â””â”€â”€ supports # å…¨å±€é…ç½®</span></span>
<span class="line"><span style="color:#FFCB6B;">â”‚</span><span style="color:#C3E88D;">     	â””â”€â”€ index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="åŸºæœ¬ç«¯æµ‹" tabindex="-1">åŸºæœ¬ç«¯æµ‹ <a class="header-anchor" href="#åŸºæœ¬ç«¯æµ‹" aria-label="Permalink to &quot;åŸºæœ¬ç«¯æµ‹&quot;">â€‹</a></h3><p>è¿™é‡Œæˆ‘ä»¬å°è¯•ä½¿ç”¨ç«¯æµ‹æ¥æµ‹è¯•Vue3çš„ç»„ä»¶ï¼Œç«¯æµ‹æˆ‘ä»¬è¦æä¾›é¡µé¢çœŸå®çš„æ¨¡æ‹Ÿç”¨æˆ·çš„äº¤äº’ç­‰ç­‰ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªwebæœåŠ¡åº”ç”¨ï¼Œå†…éƒ¨ä½¿ç”¨æˆ‘ä»¬å¾…æµ‹è¯•çš„vueç»„ä»¶ï¼Œç„¶åæ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸º</p><ol><li>æ­å»ºwebæœåŠ¡ï¼Œå‡è®¾è¿™é‡Œä½¿ç”¨viteæ­å»ºä¸€ä¸ªwebåº”ç”¨</li><li>é…ç½®cypressçš„å•æµ‹<code>baseUrl</code>ï¼Œè¿™æ ·åœ¨ç”¨ä¾‹ä¸­å°±å¯ä»¥ä½¿ç”¨ç›¸å¯¹åœ°å€äº†<div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> defineConfig</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  e2e</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">    baseUrl</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">http://localhost:10020</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // é…ç½®webåŸºæœ¬åœ°å€</span></span>
<span class="line"><span style="color:#F07178;">    video</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> false</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> # ä¸ç”Ÿæˆè§†é¢‘</span></span>
<span class="line"><span style="color:#F07178;">    screenshotOnRunFailure</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> false</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> # ä¸ç”Ÿæˆå¿«ç…§</span></span>
<span class="line"><span style="color:#F07178;">    supportFile</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> false</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> # ä¸è®¾ç½®å…¨å±€é…ç½®</span></span>
<span class="line"><span style="color:#F07178;">    specPattern</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">src/**/*.e2e.(tsx|ts)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> # è®¾ç½®ç«¯æµ‹ç”¨ä¾‹çš„ä½ç½®</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li>æ–°å»ºbuttonç»„ä»¶çš„æµ‹è¯•ç”¨ä¾‹ï¼š<div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// src/button/__tests__/button.e2e.tsx</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/// </span><span style="color:#89DDFF;font-style:italic;">&lt;</span><span style="color:#F07178;font-style:italic;">reference</span><span style="color:#C792EA;font-style:italic;"> types</span><span style="color:#89DDFF;font-style:italic;">=</span><span style="color:#89DDFF;font-style:italic;">&quot;</span><span style="color:#C3E88D;font-style:italic;">cypress</span><span style="color:#89DDFF;font-style:italic;">&quot;</span><span style="color:#89DDFF;font-style:italic;"> /&gt;</span></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">é¦–é¡µæµ‹è¯•</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">  it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æµ‹è¯•å¤–è§‚</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> ()</span><span style="color:#C792EA;"> =&gt;</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    cy</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">visit</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    cy</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.i-btn</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">contains</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æŒ‰é’®</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">trigger</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li>å¯åŠ¨æµ‹è¯•ï¼š<code>npm run test:e2e</code></li><li>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç•Œé¢å·²ç»æœ‰äº†åˆšåˆšæ–°å»ºçš„æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶äº†</li></ol><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230818091559622.png" alt=""></p><ol start="6"><li>ç‚¹å‡»æµ‹è¯•ç”¨ä¾‹å¼€å§‹æµ‹è¯•ï¼š</li></ol><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/2023-08-19%2009.46.04.gif" alt=""></p><div class="img-title">åŠ¨å›¾æ¼”ç¤º</div><p>å› ä¸ºæ¯”è¾ƒç®€å•æ‰§è¡Œçš„æ¯”è¾ƒå¿«ã€‚å·¦ä¾§çš„æµ‹è¯•æ—¥å¿—é¼ æ ‡ç§»åˆ°å¯¹åº”çš„ä½ç½®ä¼šæ˜¾ç¤ºå¯¹åº”çš„å¿«ç…§</p><p>ä»¥ä¸Šä¾¿æ˜¯ä¸€ä¸ªæœ€ç®€å•ä¸Šæ‰‹çš„ç«¯æµ‹ç”¨ä¾‹ï¼Œæ¯”è¾ƒç®€å•ç›¸åº”ä½ å·²ç»ä¹ŸæˆåŠŸäº†ã€‚å…¶ä»–æ›´å¤šçš„æµ‹è¯•ç”¨ä¾‹apiè¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ï¼Œå…¶å®å’Œjestå·®ä¸å¤šï¼Œä½ å¯ä»¥é€šè¿‡ <a href="https://docs.cypress.io/api/table-of-contents" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£</a> äº†è§£æ›´å¤š</p><h3 id="ä»£ç è¦†ç›–ç‡" tabindex="-1">ä»£ç è¦†ç›–ç‡ <a class="header-anchor" href="#ä»£ç è¦†ç›–ç‡" aria-label="Permalink to &quot;ä»£ç è¦†ç›–ç‡&quot;">â€‹</a></h3><p>cypressä¹Ÿæ”¯æŒä»£ç è¦†ç›–ç‡çš„æŠ¥å‘Šï¼Œé€šè¿‡å®‰è£…å¯¹åº”çš„æ’ä»¶å°±å¯ä»¥è½»æ¾æå®š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> npm i @cypress/code-coverage babel-plugin-istanbul -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æ·»åŠ babelé…ç½®</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// .babelrc</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">plugins</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">istanbul</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ·»åŠ å…¨å±€åŠŸèƒ½é…ç½®ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// cypress/support/index.js</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">@cypress/code-coverage/support</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¯¹cypressè¿›è¡Œé…ç½®ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// cypress.config.ts</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> resolve </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#89DDFF;"> {</span><span style="color:#BABED8;"> defineConfig </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cypress</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> defineConfig</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  e2e</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">    setupNodeEvents</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">on</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> config</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#82AAFF;">      require</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@cypress/code-coverage/task</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)(</span><span style="color:#BABED8;">on</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> config</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">      on</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">file:preprocessor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> require</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@cypress/code-coverage/use-babelrc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">      return</span><span style="color:#BABED8;"> config</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#F07178;">    supportFile</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">cypress/supports/index.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>æ›´å¤šè¯·å‚è€ƒå¯¹åº”çš„ğŸ‘‰ <a href="https://docs.cypress.io/guides/tooling/code-coverage" target="_blank" rel="noreferrer">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="é’©å­å‡½æ•°" tabindex="-1">é’©å­å‡½æ•° <a class="header-anchor" href="#é’©å­å‡½æ•°" aria-label="Permalink to &quot;é’©å­å‡½æ•°&quot;">â€‹</a></h3><p>åœ¨ Cypress æµ‹è¯•æ¡†æ¶ä¸­ï¼Œæœ‰ä¸€äº›é’©å­å‡½æ•°å¯ä»¥ç”¨äºåœ¨æµ‹è¯•æ‰§è¡Œçš„ä¸åŒé˜¶æ®µæ‰§è¡Œé¢å¤–çš„æ“ä½œæˆ–è®¾ç½®ã€‚è¿™äº›é’©å­å‡½æ•°æ˜¯ Cypress æä¾›çš„å…¨å±€å‡½æ•°ï¼Œå¯ä»¥åœ¨æµ‹è¯•æ–‡ä»¶ä¸­ä½¿ç”¨</p><ul><li>before: å‡½æ•°åœ¨æ¯ä¸ªæµ‹è¯•å¥—ä»¶ï¼ˆdescribe å—ï¼‰è¿è¡Œä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚å®ƒå¯ä»¥ç”¨äºè®¾ç½®æµ‹è¯•å¥—ä»¶çº§åˆ«çš„å‡†å¤‡å·¥ä½œï¼Œä¾‹å¦‚åˆå§‹åŒ–æµ‹è¯•æ•°æ®ã€ç™»å½•ç”¨æˆ·ç­‰</li><li>after: å‡½æ•°åœ¨æ¯ä¸ªæµ‹è¯•å¥—ä»¶ï¼ˆdescribe å—ï¼‰è¿è¡Œå®Œæ¯•ä¹‹åæ‰§è¡Œï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚å®ƒå¯ä»¥ç”¨äºæ¸…ç†æµ‹è¯•å¥—ä»¶çº§åˆ«çš„èµ„æºï¼Œä¾‹å¦‚æ¸…é™¤æµ‹è¯•æ•°æ®ã€é€€å‡ºç™»å½•ç­‰</li><li>beforeEach: å‡½æ•°åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆit å—ï¼‰è¿è¡Œä¹‹å‰æ‰§è¡Œã€‚å®ƒé€šå¸¸ç”¨äºè®¾ç½®æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„å‰ç½®æ¡ä»¶ï¼Œä¾‹å¦‚é‡ç½®çŠ¶æ€ã€æ¨¡æ‹Ÿè¯·æ±‚ç­‰</li><li>afterEach: å‡½æ•°åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆit å—ï¼‰è¿è¡Œå®Œæ¯•ä¹‹åæ‰§è¡Œã€‚å®ƒé€šå¸¸ç”¨äºæ¸…ç†æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„åç»­æ“ä½œï¼Œä¾‹å¦‚æ¸…é™¤ä¸´æ—¶æ•°æ®ã€è¿˜åŸçŠ¶æ€ç­‰</li></ul><h3 id="å¸¸è§é—®é¢˜" tabindex="-1">å¸¸è§é—®é¢˜ <a class="header-anchor" href="#å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;å¸¸è§é—®é¢˜&quot;">â€‹</a></h3><p>é¡¹ç›®ä¸­å¯èƒ½ä¼šä½¿ç”¨Jestè¿›è¡Œå•å…ƒæµ‹è¯•ã€cypressè¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ï¼Œç”±äºjestå’Œcypressæœ‰ç€å½¢åŒçš„apiï¼Œå¦‚ï¼šdescribeã€itç­‰ç­‰ï¼Œä¼šå‡ºç°ç±»å‹å†²çªçš„é”™è¯¯ã€‚è¿™é‡Œæˆ‘æ˜¯åœ¨<code>tsconfig</code>ä¸­å±è”½æ‰cypressæµ‹è¯•æ–‡ä»¶å°±å¯ä»¥äº†</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">compilerOptions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {},</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">exclude</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">src/**/*.e2e.tsx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#676E95;font-style:italic;"> // å±è”½æ‰cypressæµ‹è¯•ç”¨ä¾‹</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="å‚è€ƒæ–‡æ¡£" tabindex="-1">å‚è€ƒæ–‡æ¡£ <a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£" aria-label="Permalink to &quot;å‚è€ƒæ–‡æ¡£&quot;">â€‹</a></h2><ul><li><a href="https://jestjs.io/docs/getting-started" target="_blank" rel="noreferrer">Jestå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://github.com/jest-community/awesome-jest" target="_blank" rel="noreferrer">Jestæœ€ä½³å®è·µ</a></li><li><a href="https://github.com/jest-community/vscode-jest" target="_blank" rel="noreferrer">vscode-jest</a></li><li><a href="https://docs.cypress.io/guides/overview/why-cypress" target="_blank" rel="noreferrer">Cypress guide</a></li><li><a href="https://github.com/cypress-io/cypress-realworld-app" target="_blank" rel="noreferrer">cypress-realworld-app</a></li><li><a href="https://github.com/cypress-io/cypress-component-testing-apps" target="_blank" rel="noreferrer">cypress-component-testing-apps</a></li></ul>`,175);function F(i,y,D,b,u,m){const a=n("Reward"),l=n("Gitalk");return t(),e("div",null,[c,s(a),s(l)])}const C=p(r,[["render",F]]);export{B as __pageData,C as default};
