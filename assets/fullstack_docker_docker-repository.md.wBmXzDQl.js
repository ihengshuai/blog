import{_ as l,c as p,J as s,V as o,o as r,G as a}from"./chunks/framework.SV1ROkXV.js";const C=JSON.parse('{"title":"æ­å»ºdockerç§æœ‰ä»“åº“","description":"ä½¿ç”¨å®˜æ–¹registryæˆ–nexus3æ­å»ºå±äºè‡ªå·±çš„dockerç§æœ‰é•œåƒä»“åº“å®Œæ•´æ•™ç¨‹","frontmatter":{"title":"æ­å»ºdockerç§æœ‰ä»“åº“","description":"ä½¿ç”¨å®˜æ–¹registryæˆ–nexus3æ­å»ºå±äºè‡ªå·±çš„dockerç§æœ‰é•œåƒä»“åº“å®Œæ•´æ•™ç¨‹","keywords":"dockerç§æœ‰ä»“åº“,æ­å»ºdockerä»“åº“,nexusæ­å»ºdockerä»“åº“,registryæ­å»ºdockerä»“åº“","logo":"https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/icon-docker.png"},"headers":[],"relativePath":"fullstack/docker/docker-repository.md","filePath":"fullstack/docker/docker-repository.md","lastUpdated":1709440279000}'),c={name:"fullstack/docker/docker-repository.md"},t=o(`<h1 id="æ­å»ºdockerç§æœ‰ä»“åº“" tabindex="-1">æ­å»ºdockerç§æœ‰ä»“åº“ <a class="header-anchor" href="#æ­å»ºdockerç§æœ‰ä»“åº“" aria-label="Permalink to &quot;æ­å»ºdockerç§æœ‰ä»“åº“&quot;">â€‹</a></h1><p>æ­å»ºdockerç§æœ‰ä»“åº“ä¹Ÿæ˜¯å·¥ä½œä¸­ä¼šé‡åˆ°çš„ï¼Œå‡ºäºå®‰å…¨ç­–ç•¥æ¯ä¸ªå…¬å¸éƒ½ä¼šå°†è‡ªå·±çš„é•œåƒå­˜åˆ°è‡ªå·±çš„ç§æœ‰ä»“åº“ä¸­ï¼Œæœ¬ç¯‡å°†ä¼šé€šè¿‡dockerå®˜æ–¹registryå’Œnexus3ä¸¤ç§æ–¹å¼è¿›è¡Œç§åº“çš„æ­å»ºã€‚</p><p>è¿™ä¸¤ç§æ–¹å¼éƒ½éœ€è¦å…ˆå®‰è£…dockerï¼Œé€šè¿‡dockerä»¥å®¹å™¨çš„å½¢å¼éƒ¨ç½²ï¼Œæ‰€ä»¥è¯·ç¡®ä¿ä½ å®‰è£…äº†dockerï¼Œå¦‚æœä½ è¿˜æ²¡å®‰è£…æˆ–ä¸äº†è§£dockerï¼Œå¯ä»¥å…ˆé˜…è¯»ğŸ‘‰ğŸ»<a href="/fullstack/docker/install-configure.html">dockerç« èŠ‚</a></p><h2 id="å®˜æ–¹registryæ­å»º" tabindex="-1">å®˜æ–¹registryæ­å»º <a class="header-anchor" href="#å®˜æ–¹registryæ­å»º" aria-label="Permalink to &quot;å®˜æ–¹registryæ­å»º&quot;">â€‹</a></h2><p>å®˜æ–¹registryé•œåƒåœ°å€<a href="https://hub.docker.com/_/registry" target="_blank" rel="noreferrer">ç‚¹è¿™é‡ŒæŸ¥çœ‹</a></p><h3 id="å®‰è£…registry" tabindex="-1">å®‰è£…registry <a class="header-anchor" href="#å®‰è£…registry" aria-label="Permalink to &quot;å®‰è£…registry&quot;">â€‹</a></h3><ol><li>åˆ›å»ºå·æ˜ å°„æ–‡ä»¶å¤¹<div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#C3E88D;"> -p</span><span style="color:#C3E88D;"> /srv/docker-registry</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>ä¸‹è½½é•œåƒå¹¶è¿è¡Œ<div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ä¸‹è½½é•œåƒï¼Œå¯ä»¥æŒ‡å®šå…·ä½“ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> pull registry:tag</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># è¿è¡Œ</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> run -d -p </span><span style="color:#F78C6C;">5000</span><span style="color:#C3E88D;">:5000 </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  --restart=always</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  -v</span><span style="color:#C3E88D;"> /srv/docker-registry:/tmp/registry </span><span style="color:#BABED8;">\\</span></span>
<span class="line"><span style="color:#C3E88D;">  --privileged</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#C3E88D;">  --name</span><span style="color:#C3E88D;"> registry registry</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol><h3 id="ä½¿ç”¨ä»“åº“" tabindex="-1">ä½¿ç”¨ä»“åº“ <a class="header-anchor" href="#ä½¿ç”¨ä»“åº“" aria-label="Permalink to &quot;ä½¿ç”¨ä»“åº“&quot;">â€‹</a></h3><ol><li><p>æ¨é€é•œåƒ</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># æ‰¾ä¸€ä¸ªé•œåƒï¼Œæ²¡æœ‰å¯ä»¥è‡ªå·±build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æ›´æ”¹é•œåƒæ ‡ç­¾(ç¤ºä¾‹)  localhostä¸ºdockerä»“åº“çš„ipï¼Œ5000 æ˜¯ç«¯å£</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> tag nginx:1.1 localhost:5000/nginx:1.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> ~ docker push localhost:5000/nginx:1.15.3</span></span>
<span class="line"><span style="color:#FFCB6B;">The</span><span style="color:#C3E88D;"> push refers to repository [localhost:5000/nginx]</span></span>
<span class="line"><span style="color:#FFCB6B;">8707677a5773:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">0aad8cc1e782:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">bb97ae9f0f57:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">1.15.3:</span><span style="color:#C3E88D;"> digest: sha256:98824065f066d6839af42c512cb672fb0151322fa80fd6dc4019bfa8bd6affae size: </span><span style="color:#F78C6C;">948</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li><li><p>æ‹‰å–é•œåƒ</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> pull localhost:5000/nginx:1.15.3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>é…ç½®ä»“åº“ip</p><p>ä½¿ç”¨å®¿ä¸»æœºçš„<code>ip+port</code>æ–¹å¼ï¼Œè¿™é‡Œä¼šå‘ç°æ‹‰å–ä¸æˆåŠŸï¼Œè¿™æ˜¯å› ä¸ºdockeré»˜è®¤ä½¿ç”¨<code>https</code>çš„æ–¹å¼è¿›è¡Œè¿æ¥ï¼Œä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶è®©dockerå¿½ç•¥å½“å‰åœ°å€</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> ~ docker pull </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:7999/nginx:1.15.3</span></span>
<span class="line"><span style="color:#FFCB6B;">Error</span><span style="color:#C3E88D;"> response from daemon: Get </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://192.168.10.10:7999/v2/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">: dial tcp </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:7999: connect: connection refused</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç¼–è¾‘<code>/etc/docker/daemon.json</code>ï¼Œæ²¡æœ‰æ­¤æ–‡ä»¶è‡ªè¡Œåˆ›å»ºï¼š</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">registry-mirrors</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">https://docker.mirrors.ustc.edu.cn</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  ],</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">insecure-registries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">192.168.10.10:7999</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // ....</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>é…ç½®å®Œåè¦é‡å¯åå°è¿›ç¨‹ã€dockerå’Œä»“åº“ï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#C3E88D;"> daemon-reload</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#C3E88D;"> restart docker</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> restart registry</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> ~ docker pull </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:5000/nginx:1.15.3</span></span>
<span class="line"><span style="color:#FFCB6B;">1.15.3:</span><span style="color:#C3E88D;"> Pulling from nginx</span></span>
<span class="line"><span style="color:#FFCB6B;">Digest:</span><span style="color:#C3E88D;"> sha256:98824065f066d6839af42c512cb672fb0151322fa80fd6dc4019bfa8bd6affae</span></span>
<span class="line"><span style="color:#FFCB6B;">Status:</span><span style="color:#C3E88D;"> Downloaded newer image for </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:5000/nginx:1.15.3</span></span>
<span class="line"><span style="color:#FFCB6B;">192.168.10.10:5000/nginx:1.15.3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol><p>ä»¥ä¸Šä¾¿æ˜¯ä½¿ç”¨å®˜æ–¹registryæ­å»ºä»“åº“çš„æ­¥éª¤ï¼Œä»¥ä¸Šå¹¶æ²¡æœ‰ä½¿ç”¨è´¦æˆ·å¯†ç ï¼Œè¿™é‡Œæ²¡æœ‰æ¼”ç¤ºã€‚è€Œæˆ‘æ›´æ¨èç”¨å…¶ä»–æ–¹å¼æ­å»ºï¼Œå¦‚æ¥ä¸‹æ¥çš„nexus3ï¼Œæœ‰å›¾å½¢åŒ–ã€æƒé™é…ç½®æ›´åŠ å‹å¥½ã€‚</p><h2 id="ä½¿ç”¨nexus3æ­å»º" tabindex="-1">ä½¿ç”¨nexus3æ­å»º <a class="header-anchor" href="#ä½¿ç”¨nexus3æ­å»º" aria-label="Permalink to &quot;ä½¿ç”¨nexus3æ­å»º&quot;">â€‹</a></h2><p>ä½¿ç”¨nexus3ä½ éœ€è¦å…ˆå®‰è£…ï¼Œå…³äºdockerå®‰è£…nexus3è¿™é‡Œä¸å†åšä»‹ç»äº†ï¼Œå¦‚æœä½ çœ‹äº†æˆ‘çš„å¦ä¸€ç¯‡ã€Œ<a href="/fullstack/docker/npm-repository.html#å®‰è£…nexus3">ä½¿ç”¨dockeræ­å»ºnpmä»“åº“</a>ã€ä¸€æ–‡ä½ åº”è¯¥å·²ç»å®‰è£…nexus3äº†ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…å¯ä»¥é˜…è¯»æ­¤ç¯‡ï¼Œä»¥ä¸‹æœ¬æ–‡éƒ½é»˜è®¤å®‰è£…äº†nexus3</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>ä»¥ä¸‹å¯¹äºnexus3çš„ä½¿ç”¨ä¸æ˜¯å¾ˆè¯¦ç»†ï¼Œå¦‚æœä½ å‘ç°æœ‰äº›æ¦‚å¿µä¸æ¸…æ¥šï¼Œå¯ä»¥å…ˆé˜…è¯»æˆ‘çš„nexus3ã€Œ<a href="/fullstack/docker/npm-repository.html#å®‰è£…nexus3">ä½¿ç”¨dockeræ­å»ºnpmä»“åº“</a>ã€ä¸€æ–‡ç†Ÿæ‚‰nexus3çš„åŸºæœ¬ä½¿ç”¨æˆ–è€…å‚è€ƒå…¶ä»–ç¬¬ä¸‰æ–¹èµ„æ–™éƒ½å¯ä»¥</p></div><h3 id="åˆ›å»ºå­˜å‚¨é›†" tabindex="-1">åˆ›å»ºå­˜å‚¨é›† <a class="header-anchor" href="#åˆ›å»ºå­˜å‚¨é›†" aria-label="Permalink to &quot;åˆ›å»ºå­˜å‚¨é›†&quot;">â€‹</a></h3><p>åˆ›å»ºå­˜å‚¨é›†æ¥å­˜å‚¨æˆ‘ä»¬çš„dockeré•œåƒï¼Œä½¿ç”¨ä»“åº“å…³è”å½“å‰å­˜å‚¨é›† <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230322150502893.png" alt="image-20230322150502893"></p><h3 id="åˆ›å»ºä»“åº“" tabindex="-1">åˆ›å»ºä»“åº“ <a class="header-anchor" href="#åˆ›å»ºä»“åº“" aria-label="Permalink to &quot;åˆ›å»ºä»“åº“&quot;">â€‹</a></h3><p>è¿™é‡Œä¼šåˆ›å»ºhostedã€proxyã€groupä¸‰ç§ç±»å‹çš„dockerä»“åº“</p><ol><li>åˆ›å»ºhostedä»“åº“ï¼ŒçœŸæ­£å­˜å‚¨æˆ‘ä»¬è‡ªå·±çš„é•œåƒä»“åº“ <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230322150834614.png" alt="image-20230322150834614"></li></ol><ul><li>Repository Connectorsï¼šä»“åº“è¿›è¡Œè¿æ¥è®¿é—®é…ç½®ï¼Œè¿™é‡Œé…ç½®äº†httpå’Œhttpsä¸¤ä¸ªç«¯å£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸¤ä¸ªç«¯å£éœ€è¦å¤„äºåˆ›å»ºnexus3å®¹å™¨æ—¶æš´éœ²å‡ºä¸€æ®µç«¯å£èŒƒå›´å†…</li><li>Allow anonymous docker pullï¼šå…è®¸è®¿å®¢ä¸‹è½½é•œåƒï¼Œå¦‚æœä½ ä¸å…è®¸åˆ™ä¸ç”¨å‹¾é€‰</li><li>é€‰æ‹©å­˜å‚¨é›†docker</li><li>Deployment Policyï¼šæ ¹æ®è‡ªå·±çš„éœ€æ±‚è®¾ç½®å‘å¸ƒç­–ç•¥ï¼Œè¿™é‡Œè®¾ç½®å…è®¸é‡æ–°å‘å¸ƒç›¸åŒç‰ˆæœ¬</li></ul><ol start="2"><li><p>åˆ›å»ºproxyä»“åº“ï¼Œä»£ç†ç¬¬ä¸‰æ–¹çš„ä»“åº“ï¼Œè¿™é‡Œä»£ç†åˆ°ç½‘æ˜“åŠ é€Ÿåœ°å€ <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230322151617664.png" alt="image-20230322151617664"></p></li><li><p>åˆ›å»ºgroupä»“åº“ï¼Œä»£ç†hostedå’Œproxy <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230322151914643.png" alt="image-20230322151914643"></p></li></ol><h3 id="é…ç½®è§’è‰²ä¸ç”¨æˆ·" tabindex="-1">é…ç½®è§’è‰²ä¸ç”¨æˆ· <a class="header-anchor" href="#é…ç½®è§’è‰²ä¸ç”¨æˆ·" aria-label="Permalink to &quot;é…ç½®è§’è‰²ä¸ç”¨æˆ·&quot;">â€‹</a></h3><ol><li><p>åˆ›å»ºdockerè§’è‰²ç”¨æ¥ç®¡ç†dockerç›¸å…³æ“ä½œï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚å°†æœ‰å…³dockerçš„æƒé™ç§»è‡³å³ä¾§ <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230322152259064.png" alt="image-20230322152259064"></p></li><li><p>åˆ›å»ºç”¨æˆ·ï¼Œæœ‰äº†è§’è‰²æƒé™åå°±å¯ä»¥åˆ›å»ºå¯¹åº”çš„ç”¨æˆ·èµ‹äºˆæƒé™ï¼Œä»¥åå°±å¯ä»¥ç”¨æ­¤ç”¨æˆ·è¿›è¡Œç™»å½•ç§æœ‰ä»“åº“äº† <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230322152535767.png" alt="image-20230322152535767"></p></li></ol><h3 id="é…ç½®realms" tabindex="-1">é…ç½®Realms <a class="header-anchor" href="#é…ç½®realms" aria-label="Permalink to &quot;é…ç½®Realms&quot;">â€‹</a></h3><p>é…ç½®realmså…è®¸dockerç›¸å…³è§„åˆ™è¿›è¡Œæˆæƒï¼Œå¦‚æœä½ å…è®¸äº†æ¸¸å®¢ä¸‹è½½é•œåƒï¼Œéœ€è¦åœ¨<code>Anonymous Access</code>è®¾ç½®å…è®¸è®¿é—® <img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/image-20230322152830776.png" alt="image-20230322152830776"></p><h3 id="ç™»å½•ä»“åº“" tabindex="-1">ç™»å½•ä»“åº“ <a class="header-anchor" href="#ç™»å½•ä»“åº“" aria-label="Permalink to &quot;ç™»å½•ä»“åº“&quot;">â€‹</a></h3><ol><li>ç™»å½•docker(group)çš„ä»“åº“ï¼Œæ³¨æ„ä½¿ç”¨ipå’Œæš´éœ²çš„httpç«¯å£è¿›è¡Œç™»å½•ï¼Œä¸è¿‡dockeré»˜è®¤ä¼šä½¿ç”¨httpsè¿›è¡Œç™»å½•ï¼Œhttpä¼šè§†ä¸ºä¸å®‰å…¨ï¼Œéœ€è¦æ·»åŠ ä¸€äº›é…ç½®ï¼Œç¼–è¾‘<code>/etc/docker/deamon.json</code>ï¼ˆæ²¡æ­¤æ–‡ä»¶è‡ªè¡Œåˆ›å»ºï¼‰ï¼š<div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">registry-mirrors</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">https://docker.mirrors.ustc.edu.cn</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  ],</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // é…ç½®è¿™ä¸ª ä¸å®‰å…¨çš„ä»“åº“ï¼Œæˆ‘è¿™é‡Œé…ç½®äº†å…¶ä»–çš„ï¼ŒæŒ‰ç…§è‡ªå·±éœ€æ±‚è¿›è¡Œé…ç½®</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">insecure-registries</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">192.168.10.10:8081</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">192.168.10.10:8000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">192.168.10.10:8001</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">192.168.10.10:7999</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li>é‡å¯æœåŠ¡<div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#C3E88D;"> daemon-reload</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#C3E88D;"> restart docker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># nexusæ²¡å¯åŠ¨çš„éœ€è¦æ‰‹åŠ¨å¯åŠ¨</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> start nexus3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li>ç™»å½•ä»“åº“<div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> ~ docker login </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8001</span></span>
<span class="line"><span style="color:#FFCB6B;">Username:</span><span style="color:#C3E88D;"> ihengshuai</span></span>
<span class="line"><span style="color:#FFCB6B;">Password:</span></span>
<span class="line"><span style="color:#FFCB6B;">WARNING!</span><span style="color:#C3E88D;"> Your password will be stored unencrypted in /root/.docker/config.json.</span></span>
<span class="line"><span style="color:#FFCB6B;">Configure</span><span style="color:#C3E88D;"> a credential helper to remove this warning. See</span></span>
<span class="line"><span style="color:#FFCB6B;">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Login</span><span style="color:#C3E88D;"> Succeeded</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol><h3 id="æ¨é€é•œåƒ" tabindex="-1">æ¨é€é•œåƒ <a class="header-anchor" href="#æ¨é€é•œåƒ" aria-label="Permalink to &quot;æ¨é€é•œåƒ&quot;">â€‹</a></h3><p>éšä¾¿æ‰¾ä¸€ä¸ªå·²ä¸‹è½½çš„é•œåƒï¼Œå¹¶ä¿®æ”¹æˆè‡ªå·±ä»“åº“çš„ipå’ŒåŒ…åï¼š</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># æ‰“tag å†™ä¸Šè‡ªå·±ä»“åº“ IP:Port/packageName:version</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> tag nginx:1.15.3 </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8001/myimage:v1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å‘å¸ƒé•œåƒ</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> ~ docker push </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8001/myimage:v1</span></span>
<span class="line"><span style="color:#FFCB6B;">The</span><span style="color:#C3E88D;"> push refers to repository [</span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8001/myimage]</span></span>
<span class="line"><span style="color:#FFCB6B;">8707677a5773:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">0aad8cc1e782:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">bb97ae9f0f57:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">denied:</span><span style="color:#C3E88D;"> Deploying to groups is a PRO-licensed feature. See https://links.sonatype.com/product-nexus-repository</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å…¶å®ä»¥ä¸Šå¯ä»¥ç®—æ˜¯æˆåŠŸæ­¥éª¤ï¼Œåªä¸è¿‡æ¨é€é•œåƒåˆ°<code>docker(group)</code>æ˜¯ä»˜è´¹åŠŸèƒ½ï¼Œè€Œ<code>docker(hosted)</code>æ˜¯å…è´¹çš„ï¼Œä½ å¯ä»¥ç™»å½•hostedåœ°å€æ¨é€ï¼Œä½¿ç”¨<code>docker(group)</code>è¿›è¡Œé•œåƒçš„ä¸‹è½½</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ç™»å½•hosted</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> login </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ‡æ¢æˆhostedæš´éœ²çš„http port</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> tag nginx:1.15.3 </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8000/myimage:v1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å‘å¸ƒé•œåƒ</span></span>
<span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> ~ docker push </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8000/myimage:v1</span></span>
<span class="line"><span style="color:#FFCB6B;">8707677a5773:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">0aad8cc1e782:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">bb97ae9f0f57:</span><span style="color:#C3E88D;"> Layer already exists</span></span>
<span class="line"><span style="color:#FFCB6B;">v1:</span><span style="color:#C3E88D;"> digest: sha256:98824065f066d6839af42c512cb672fb0151322fa80fd6dc4019bfa8bd6affae size: </span><span style="color:#F78C6C;">948</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>åˆ°è¿™é‡Œå°±å‘å¸ƒæˆåŠŸäº†</p><h3 id="ä¸‹è½½é•œåƒ" tabindex="-1">ä¸‹è½½é•œåƒ <a class="header-anchor" href="#ä¸‹è½½é•œåƒ" aria-label="Permalink to &quot;ä¸‹è½½é•œåƒ&quot;">â€‹</a></h3><p>ä¸‹è½½é•œåƒå¯ä»¥ä½¿ç”¨<code>docker(group)</code>çš„åœ°å€ï¼Œå¦‚æœä¸‹è½½å¤±è´¥ï¼Œå¯èƒ½åŸå› æ˜¯æ²¡é…ç½®æƒé™ï¼Œæ£€æŸ¥ä¸€ä¸‹è‡ªå·±è´¦æˆ·çš„æƒé™</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">âœ</span><span style="color:#C3E88D;"> ~ docker pull </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8001/myimage:v1</span></span>
<span class="line"><span style="color:#FFCB6B;">v1:</span><span style="color:#C3E88D;"> Pulling from myimage</span></span>
<span class="line"><span style="color:#FFCB6B;">Digest:</span><span style="color:#C3E88D;"> sha256:98824065f066d6839af42c512cb672fb0151322fa80fd6dc4019bfa8bd6affae</span></span>
<span class="line"><span style="color:#FFCB6B;">Status:</span><span style="color:#C3E88D;"> Downloaded newer image for </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.10.10:8001/myimage:v1</span></span>
<span class="line"><span style="color:#FFCB6B;">192.168.10.10:8001/myimage:v1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,35);function i(d,y,u,b,m,h){const n=a("Reward"),e=a("Gitalk");return r(),p("div",null,[t,s(n),s(e)])}const g=l(c,[["render",i]]);export{C as __pageData,g as default};
