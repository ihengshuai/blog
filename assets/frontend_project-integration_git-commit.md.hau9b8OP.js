import{_ as p,c as e,J as s,V as o,o as c,G as n}from"./chunks/framework.SV1ROkXV.js";const h=JSON.parse('{"title":"项目集成之提交规范","description":"项目的规范提交可以帮助团队进行快速定位内容,对于团队进行之间协作和项目维护与迭代有非常重要的作用,本文一起来看看如何在项目中限制git提交信息格式以及使用husky统一lint和commitlint验证","frontmatter":{"title":"项目集成之提交规范","description":"项目的规范提交可以帮助团队进行快速定位内容,对于团队进行之间协作和项目维护与迭代有非常重要的作用,本文一起来看看如何在项目中限制git提交信息格式以及使用husky统一lint和commitlint验证","keywords":"提交规范,git hooks,husky,commitlint,husky结合eslint,husky集合stylelint,husky集合commitlint","logo":"https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/icon-project-integration.png"},"headers":[],"relativePath":"frontend/project-integration/git-commit.md","filePath":"frontend/project-integration/git-commit.md","lastUpdated":1709440279000}'),t={name:"frontend/project-integration/git-commit.md"},r=o(`<h1 id="项目集成之提交规范" tabindex="-1">项目集成之提交规范 <a class="header-anchor" href="#项目集成之提交规范" aria-label="Permalink to &quot;项目集成之提交规范&quot;">​</a></h1><p>在团队协作中尤其是对于大型项目，git规范提交在团队中发挥着重要的作用，如果没有统一的规范提交格式，提交信息多了将会显得杂乱无章，这对于后期维护或者是错误定位及回滚尤其是大型项目将是个灾难。拥有固定的提交规范格式将会一目了然，可以快速定位到想要找到的内容。下面就来看看如何在项目中规定提交的规范格式</p><h2 id="约定式提交" tabindex="-1">约定式提交 <a class="header-anchor" href="#约定式提交" aria-label="Permalink to &quot;约定式提交&quot;">​</a></h2><p><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0/" target="_blank" rel="noreferrer">约定式提交规范</a>是一种基于提交信息的轻量级约定。 它提供了一组简单规则来创建清晰的提交历史； 这更有利于编写自动化工具。 通过在提交信息中描述功能、修复和破坏性变更， 目前最受欢迎的是 <a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines" target="_blank" rel="noreferrer">Angular规范</a></p><p>提交格式如下：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">type</span><span style="color:#89DDFF;">&gt;(&lt;</span><span style="color:#C3E88D;">scope</span><span style="color:#89DDFF;">&gt;)</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">subject</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">BLANK LINE</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">BLANK LINE</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">footer</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>每次提交可以包含页眉(header)、正文(body)和页脚(footer)，每次提交必须包含页眉内容，页眉的格式指定为提交类型(type)、作用域(scope，可选)和主题(subject)</p><h3 id="提交类型" tabindex="-1">提交类型 <a class="header-anchor" href="#提交类型" aria-label="Permalink to &quot;提交类型&quot;">​</a></h3><p>提交类型用来表示本次修改的类型，常见的有如下多种类型：</p><ul><li>feat：增加新的特征</li><li>docs：对文档进行了修改</li><li>fix：修复bug</li><li>style：不影响代码含义的修改，比如空格、格式化、缺失的分号等</li><li>test：增加确实的测试或者矫正已存在的测试</li><li>refactor：既不是修复bug也不是添加特征的代码重构</li><li>chore：构建过程或辅助工具的变动</li></ul><h3 id="作用域" tabindex="-1">作用域 <a class="header-anchor" href="#作用域" aria-label="Permalink to &quot;作用域&quot;">​</a></h3><p>用来指定本次修改的范围，如：component、config、docs等等</p><h3 id="主题" tabindex="-1">主题 <a class="header-anchor" href="#主题" aria-label="Permalink to &quot;主题&quot;">​</a></h3><p>主题通常用简洁描述概括本次修改的内容</p><h3 id="breaking-changes" tabindex="-1">Breaking Changes <a class="header-anchor" href="#breaking-changes" aria-label="Permalink to &quot;Breaking Changes&quot;">​</a></h3><p>不兼容修改指的是本次提交修改了不兼容之前版本的API或者环境变量，所有不兼容修改都必须在页脚中作为中断更改块提到，以BREAKING CHANGE:开头，后跟一个空格或者两个换行符，其余的信息就是对此次修改的描述，修改的理由和修改注释</p><h3 id="关联issue" tabindex="-1">关联issue <a class="header-anchor" href="#关联issue" aria-label="Permalink to &quot;关联issue&quot;">​</a></h3><p>如果本次提交目的是修改issue的话，需要在页脚引用该issue，如修复bug：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">Closes</span><span style="color:#676E95;font-style:italic;"> #1, #2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="作用" tabindex="-1">作用 <a class="header-anchor" href="#作用" aria-label="Permalink to &quot;作用&quot;">​</a></h3><p>对于团队协作而言，约定式提交的作用主要体现在以下几个方面：</p><ul><li><u>统一提交信息格式</u>：团队成员遵循相同的提交信息格式，从而使提交历史更加整洁、一致。这有助于提高项目的可读性和可维护性</li><li><u>提高代码审查效率</u>：规范的提交信息可以帮助团队成员更快地理解每次提交的目的和更改内容。这可以提高代码审查的效率，减少沟通成本</li><li><u>便于生成版本日志</u>：遵循一致的提交信息规范可以使生成版本日志变得更加容易。一些工具（如 semantic-release）可以自动根据提交信息生成版本日志</li><li><u>提高团队协作水平</u>：帮助团队成员养成良好的编码习惯，培养一致的协作风格。这有助于提高团队的整体协作水平和项目成功率</li></ul><h2 id="commitlint" tabindex="-1">CommitLint <a class="header-anchor" href="#commitlint" aria-label="Permalink to &quot;CommitLint&quot;">​</a></h2><p><a href="https://commitlint.js.org/" target="_blank" rel="noreferrer">commitlint</a> 是一个用于规范 Git 提交信息的工具。它可以帮助团队遵循一致的提交信息规范，从而提高代码库的可读性和可维护性。使用 commitlint 对于团队协作具有很大的益处，尤其是在大型项目中</p><p>commitlint 的工作原理是通过配置文件（如 commitlint.config.js）定义一组提交信息规则。当开发者提交更改时，commitlint 会检查提交信息是否符合这些规则。如果不符合，提交将被拒绝，开发者需要修改提交信息以满足规则要求</p><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><p>在项目中安装commitcli和@commitlint/config-conventional常规的配置：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> npm install @commitlint/config-conventional @commitlint/cli -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h3><p>根目录下创建<code>.commitlintrc.js</code>配置文件：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">  extends</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> []</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 继承规则</span></span>
<span class="line"><span style="color:#F07178;">  rules</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {},</span><span style="color:#676E95;font-style:italic;"> // 具体规则</span></span>
<span class="line"><span style="color:#F07178;">  prompt</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {}</span><span style="color:#676E95;font-style:italic;"> // 交互式</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>commitlint的配置也包含<a href="https://commitlint.js.org/#/reference-configuration" target="_blank" rel="noreferrer">多种选项</a>，其中常用的就是extends、rules、prompt</p><p>extends用来继承第三方规则，通常就是官方提供的规则：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">  extends</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@commitlint/config-conventional</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a href="https://commitlint.js.org/#/reference-rules" target="_blank" rel="noreferrer">rules</a>用来配置具体的规则，或者覆盖继承的规则，常用的规则属性如：type-enum（用来限制提交类型）、type-case（格式大小写）、type-empty（类型是否为空）、subject-empty（主题信息）等：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">  rules</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">  	&#39;</span><span style="color:#F07178;">type-enum</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [ </span><span style="color:#676E95;font-style:italic;">// 定义提交类型</span></span>
<span class="line"><span style="color:#F78C6C;">  		2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  		&#39;</span><span style="color:#C3E88D;">always</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  		[</span></span>
<span class="line"><span style="color:#89DDFF;">  			&#39;</span><span style="color:#C3E88D;">feat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 新功能</span></span>
<span class="line"><span style="color:#89DDFF;">  			&#39;</span><span style="color:#C3E88D;">bug</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 具体修复的bug</span></span>
<span class="line"><span style="color:#89DDFF;">  			&#39;</span><span style="color:#C3E88D;">fix</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 修复的功能</span></span>
<span class="line"><span style="color:#89DDFF;">  			&#39;</span><span style="color:#C3E88D;">ci</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // ci更新</span></span>
<span class="line"><span style="color:#89DDFF;">  			&#39;</span><span style="color:#C3E88D;">docs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 文档</span></span>
<span class="line"><span style="color:#89DDFF;">  			&#39;</span><span style="color:#C3E88D;">chore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 比较杂的内容</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  			// ...</span></span>
<span class="line"><span style="color:#BABED8;">  		]</span></span>
<span class="line"><span style="color:#BABED8;">  	]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  	&#39;</span><span style="color:#F07178;">type-case</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">always</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">lower-case</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 提交类型大小写</span></span>
<span class="line"><span style="color:#89DDFF;">  	&#39;</span><span style="color:#F07178;">type-empty</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">never</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 提交类型不能为空</span></span>
<span class="line"><span style="color:#89DDFF;">  	&#39;</span><span style="color:#F07178;">subject-empty</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">never</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;"> // 提交信息不能为空</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  	// ...</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>提交类型错误，不存在 &#39;happy&#39; 类型：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> git:</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">dev</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;"> ✗ echo </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happy: 测试</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> npx</span><span style="color:#C3E88D;"> commitlint</span></span>
<span class="line"><span style="color:#FFCB6B;">⧗</span><span style="color:#C3E88D;">   input: happy: 测试</span></span>
<span class="line"><span style="color:#FFCB6B;">✖</span><span style="color:#C3E88D;">   type must be one of [feat, bug, fix, ui, ci, perfect, docs, style, perf, </span></span>
<span class="line"><span style="color:#FFCB6B;">release,</span><span style="color:#C3E88D;"> deploy, refactor, test, chore, revert, merge, build] [type-enum]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">✖</span><span style="color:#C3E88D;">   found </span><span style="color:#F78C6C;">1</span><span style="color:#C3E88D;"> problems, </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;"> warnings</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>提交信息不能为空：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> git:</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">dev</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;"> ✗ echo </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">feat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> npx</span><span style="color:#C3E88D;"> commitlint  </span></span>
<span class="line"><span style="color:#FFCB6B;">⧗</span><span style="color:#C3E88D;">   input: feat</span></span>
<span class="line"><span style="color:#FFCB6B;">✖</span><span style="color:#C3E88D;">   subject may not be empty [subject-empty]</span></span>
<span class="line"><span style="color:#FFCB6B;">✖</span><span style="color:#C3E88D;">   type may not be empty [type-empty]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">✖</span><span style="color:#C3E88D;">   found </span><span style="color:#F78C6C;">2</span><span style="color:#C3E88D;"> problems, </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;"> warnings</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>正确提交：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> git:</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">dev</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;"> ✗ echo </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">feat: 测试</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> npx</span><span style="color:#C3E88D;"> commitlint</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="commitizen" tabindex="-1">commitizen <a class="header-anchor" href="#commitizen" aria-label="Permalink to &quot;commitizen&quot;">​</a></h2><p>commitlint主要在commit时对提交信息进行校验，而<a href="http://commitizen.github.io/cz-cli/" target="_blank" rel="noreferrer">commitizen</a>是在commit前通过交互式进行提交，这样就可以统一输入内容，本人认为相对繁琐。下面来看如何使用</p><h3 id="安装-1" tabindex="-1">安装 <a class="header-anchor" href="#安装-1" aria-label="Permalink to &quot;安装&quot;">​</a></h3><p>安装<code>commitizen</code>，可以安装在全局也可以安装在项目中，安装方式和工具可自行选择：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> yarn add commitizen -D</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> npx commitizen init cz-conventional-changelog --yarn --dev --exact</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在<code>package.json</code>中配置脚本：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">commit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">cz</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h3><p>在项目中先对代码进行暂存，然后进行提交：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> npm run commit</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>当执行以上命令后，就会进入commitizen交互阶段：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> git:</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">main</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;"> ✗ npm run commit</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#C3E88D;"> cz</span></span>
<span class="line"><span style="color:#FFCB6B;">cz-cli@4.3.0,</span><span style="color:#C3E88D;"> cz-conventional-changelog@3.3.0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 选择提交类型</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> Select the type of change that you</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">re committing: (Use arrow keys)</span></span>
<span class="line"><span style="color:#C3E88D;">❯ feat:     A new feature</span></span>
<span class="line"><span style="color:#C3E88D;">  fix:      A bug fix</span></span>
<span class="line"><span style="color:#C3E88D;">  docs:     Documentation only changes</span></span>
<span class="line"><span style="color:#C3E88D;">  style:    Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)</span></span>
<span class="line"><span style="color:#C3E88D;">  refactor: A code change that neither fixes a bug nor adds a feature</span></span>
<span class="line"><span style="color:#C3E88D;">  perf:     A code change that improves performance</span></span>
<span class="line"><span style="color:#C3E88D;">  test:     Adding missing tests or correcting existing tests</span></span>
<span class="line"><span style="color:#C3E88D;">(Move up and down to reveal more choices)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;"># 这里选择feat</span></span>
<span class="line"><span style="color:#C3E88D;">? Select the type of change that you</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">re committing: feat:     A new feature</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> What is the scope of this change </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">e.g.</span><span style="color:#C3E88D;"> component or file name</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">press</span><span style="color:#C3E88D;"> enter to skip</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> config  </span><span style="color:#676E95;font-style:italic;"># 修改范围 scope</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> Write a short, imperative tense description of the change </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">max</span><span style="color:#F78C6C;"> 86</span><span style="color:#C3E88D;"> chars</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">:   </span><span style="color:#676E95;font-style:italic;"># 主题 commit简短信息</span></span>
<span class="line"><span style="color:#89DDFF;"> (</span><span style="color:#FFCB6B;">5</span><span style="color:#89DDFF;">)</span><span style="color:#FFCB6B;"> 初始化项目</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> Provide a longer description of the change: </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">press</span><span style="color:#C3E88D;"> enter to skip</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # 长描述，这里没有</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> Are there any breaking changes</span><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> No   </span><span style="color:#676E95;font-style:italic;"># 是否是不兼容性的改变 否</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> Does this change affect any open issues</span><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> No   </span><span style="color:#676E95;font-style:italic;"># 是否影响相关issue</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">main (root-commit) </span><span style="color:#F78C6C;">76</span><span style="color:#BABED8;">f5d72</span><span style="color:#89DDFF;">]</span><span style="color:#BABED8;"> feat</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">config</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">: 初始化项目</span></span>
<span class="line"><span style="color:#FFCB6B;"> 4</span><span style="color:#C3E88D;"> files changed, </span><span style="color:#F78C6C;">1111</span><span style="color:#C3E88D;"> insertions</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">+</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;"> create</span><span style="color:#C3E88D;"> mode </span><span style="color:#F78C6C;">100644</span><span style="color:#C3E88D;"> .gitignore</span></span>
<span class="line"><span style="color:#FFCB6B;"> create</span><span style="color:#C3E88D;"> mode </span><span style="color:#F78C6C;">100644</span><span style="color:#C3E88D;"> .npmrc</span></span>
<span class="line"><span style="color:#FFCB6B;"> create</span><span style="color:#C3E88D;"> mode </span><span style="color:#F78C6C;">100644</span><span style="color:#C3E88D;"> package.json</span></span>
<span class="line"><span style="color:#FFCB6B;"> create</span><span style="color:#C3E88D;"> mode </span><span style="color:#F78C6C;">100644</span><span style="color:#C3E88D;"> yarn.lock</span></span>
<span class="line"><span style="color:#FFCB6B;">✨</span><span style="color:#C3E88D;">  Done in </span><span style="color:#F78C6C;">169.05</span><span style="color:#C3E88D;">s.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>这样团队都是用此脚本时commit信息就会被规范化而不会出现五花八门现象</p><h3 id="自定义规范" tabindex="-1">自定义规范 <a class="header-anchor" href="#自定义规范" aria-label="Permalink to &quot;自定义规范&quot;">​</a></h3><p>安装<code>cz-customizable</code>插件进行自定义配置：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> yarn add cz-customizable -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改commitizen的规则路径：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// package.json</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">commitizen</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">      &quot;</span><span style="color:#F78C6C;">path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">node_modules/cz-customizable</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>commitizen默认会读取根项目下的<code>.cz-config.js</code>文件，新建文件：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // 自定义提交类型</span></span>
<span class="line"><span style="color:#F07178;">  types</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">✨ feat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">✨ feat:     新功能</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">🐛 fix</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">🐛 fix:      修复bug</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">🎉 init</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">🎉 init:     初始化</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">✏️ docs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">✏️  docs:     文档变更</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">💄 style</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">💄 style:    代码的样式美化</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">♻️ refactor</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">♻️  refactor: 重构</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">⚡️ perf</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">⚡️ perf:     性能优化</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">✅ test</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">✅ test:     测试</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">⏪️ revert</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">⏪️ revert:   回退</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">📦️ build</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">📦️ build:    打包</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">🚀 chore</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">🚀 chore:    构建/工程依赖/工具</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#F07178;">      value</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">👷 ci</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">👷 ci:       CI related changes</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // 修改范围</span></span>
<span class="line"><span style="color:#F07178;">  scopes</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span><span style="color:#F07178;"> name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">components</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span><span style="color:#F07178;"> name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span><span style="color:#F07178;"> name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">services</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span><span style="color:#F07178;"> name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">utils</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span><span style="color:#F07178;"> name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">styles</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> },</span></span>
<span class="line"><span style="color:#BABED8;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // 每个阶段提示信息</span></span>
<span class="line"><span style="color:#F07178;">  messages</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#F07178;">    type</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">请选择提交类型(必填):</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    customScope</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">请选择文件修改范围(可选):</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    subject</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">请简要描述提交信息(必填):</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    body</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">请输入详细描述(可选):</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    breaking</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">列出任何BREAKING CHANGES(可选):</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    footer</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">请输入要关闭的issue，如：#1, #2, #3(可选)</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    confirmCommit</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">确定要提交吗?</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">  },</span></span>
<span class="line"><span style="color:#F07178;">  allowCustomScopes</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  allowBreakingChanges</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">:sparkles: feat</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">:bug: fix</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  subjectLimit</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 72</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><p>接下来看下效果：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> git:</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">main</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;"> ✗ yarn commit</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#C3E88D;"> cz</span></span>
<span class="line"><span style="color:#FFCB6B;">cz-cli@4.3.0,</span><span style="color:#C3E88D;"> cz-customizable@7.0.0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">All</span><span style="color:#C3E88D;"> lines except first will be wrapped after </span><span style="color:#F78C6C;">100</span><span style="color:#C3E88D;"> characters.</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#BABED8;"> 请选择提交类型</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">必填</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Use</span><span style="color:#C3E88D;"> arrow keys</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">❯</span><span style="color:#C3E88D;"> ✨ feat:     新功能</span></span>
<span class="line"><span style="color:#FFCB6B;">  🐛</span><span style="color:#C3E88D;"> fix:      修复bug</span></span>
<span class="line"><span style="color:#FFCB6B;">  🎉</span><span style="color:#C3E88D;"> init:     初始化</span></span>
<span class="line"><span style="color:#FFCB6B;">  ✏️</span><span style="color:#C3E88D;">  docs:     文档变更</span></span>
<span class="line"><span style="color:#FFCB6B;">  💄</span><span style="color:#C3E88D;"> style:    代码的样式美化</span></span>
<span class="line"><span style="color:#FFCB6B;">  ♻️</span><span style="color:#C3E88D;">  refactor: 重构</span></span>
<span class="line"><span style="color:#FFCB6B;">  ⚡️</span><span style="color:#C3E88D;"> perf:     性能优化</span></span>
<span class="line"><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Move</span><span style="color:#C3E88D;"> up and down to reveal more choices</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/commitizen-gif.gif" alt=""></p><h3 id="结合commitlint" tabindex="-1">结合commitlint <a class="header-anchor" href="#结合commitlint" aria-label="Permalink to &quot;结合commitlint&quot;">​</a></h3><p>commitizen可以与commitlint结合使用，commitizen在commit前触发、commitlint主要在commit阶段对提交信息进行校验，那么commitlint可以继承commitizen的规则，从而便可校验通过：</p><p>安装<code>commitlint-config-cz</code>：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> yarn add commitlint-config-cz -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>配置commitlint：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">// .commitlintrc.js</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // 这里只需要继承cz的规则，也就会读取commitizen的规则</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // 上面我们也对commitizen进行了自定义规则，那么commitlint</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // 就会读取.cz-config.js的自定义规则进行校验</span></span>
<span class="line"><span style="color:#F07178;">  extends</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#676E95;font-style:italic;">/*&quot;@commitlint/config-conventional&quot;, */</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  // 其它的归于commitlint的自定义规则全部注释掉</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>以上配置好了后，就整合好了那么在提交时就会先触发commitizen然后通过commitlint对commit进行校验</p><blockquote><p>commitizen我更认为比较繁琐，觉得使用commitlint一个结合原生的git提交就足够了</p></blockquote><h2 id="husky" tabindex="-1">Husky <a class="header-anchor" href="#husky" aria-label="Permalink to &quot;Husky&quot;">​</a></h2><p><a href="https://typicode.github.io/husky/" target="_blank" rel="noreferrer">Husky</a>是一个git钩子，可以在git的commit前和commit时添加自定义校验，通常用来eslint、stylelint和commitlint，看看如何使用</p><h3 id="安装配置" tabindex="-1">安装配置 <a class="header-anchor" href="#安装配置" aria-label="Permalink to &quot;安装配置&quot;">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> yarn add husky -D</span></span>
<span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> npx husky install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面安装后便会在根目录下生成<code>.husky</code>目录，里面包含了commit的钩子</p><p>在<code>package.json</code>中添加脚本，在项目下载时自动对git生成钩子函数：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">postinstall</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">husky install</span><span style="color:#89DDFF;">&quot;</span><span style="color:#676E95;font-style:italic;"> // 安装完后，生成git hooks</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="集成lint" tabindex="-1">集成lint <a class="header-anchor" href="#集成lint" aria-label="Permalink to &quot;集成lint&quot;">​</a></h3><p>在项目开发完后进行提交前一般都会对代码进行lint或者测试，这里就以lint为例，在提交git时对项目代码进行eslint、stylelint检查</p><p>首先设置相关的lint脚本：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">lint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">yarn lint:js &amp;&amp; yarn lint:style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">lint:js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">vue-cli-service lint --fix</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">lint:style</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">stylelint &#39;src/**/*.{less,vue,tsx}&#39; --fix</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>添加git hooks，在git提交前对代码进行校验：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> npx husky add .husky/pre-commit </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yarn lint</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>添加完后在<code>.husky/pre-commit</code>中就会添加一下信息：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/usr/bin/env sh</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#89DDFF;"> &quot;$(</span><span style="color:#FFCB6B;">dirname</span><span style="color:#C3E88D;"> -- </span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;font-style:italic;">$0</span><span style="color:#89DDFF;">&quot;)</span><span style="color:#C3E88D;">/_/husky.sh</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#C3E88D;"> lint</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 这里是手动写入，也就是sh脚本</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#C3E88D;"> Lint Sucessful</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 若lint fix后将已经暂存的文件继续暂存以commit</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> add </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">git</span><span style="color:#C3E88D;"> diff --name-only --cached</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>接下来集成commitlint</p><h3 id="集成commitlint" tabindex="-1">集成commitlint <a class="header-anchor" href="#集成commitlint" aria-label="Permalink to &quot;集成commitlint&quot;">​</a></h3><p>添加以下脚本在commit时启动commitlint检查提交信息：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">➜</span><span style="color:#C3E88D;"> npx husky add .husky/commit-msg </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npx --no-install commitlint -e</span><span style="color:#89DDFF;">&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>执行完后会在<code>.husky/commit-msg</code>中写入以下内容：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/usr/bin/env sh</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#89DDFF;"> &quot;$(</span><span style="color:#FFCB6B;">dirname</span><span style="color:#C3E88D;"> -- </span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;font-style:italic;">$0</span><span style="color:#89DDFF;">&quot;)</span><span style="color:#C3E88D;">/_/husky.sh</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">npx</span><span style="color:#C3E88D;"> --no-install</span><span style="color:#C3E88D;"> commitlint -e</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#C3E88D;"> commit success 🎉</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>到这里就已经集成完毕了，以下为集成后的使用效果：</p><p><img src="https://ihengshuai-demo1.oss-cn-beijing.aliyuncs.com/husky-example-gif.gif" alt=""></p><div class="warning custom-block"><p class="custom-block-title">号外 📣</p><p>注意使用commitizen需要使用<code>cz</code>钩子而不能使用<code>git commit</code>了，其实本人觉得使用commitizen交互性比较繁琐，可以在项目中直接使用commitlint并定义相关规则，然后使用<code>git commit</code>对触发husky钩子并对commit信息进行验证</p></div><h2 id="参考文档" tabindex="-1">参考文档 <a class="header-anchor" href="#参考文档" aria-label="Permalink to &quot;参考文档&quot;">​</a></h2><ul><li><a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines" target="_blank" rel="noreferrer">angular commit format</a></li><li><a href="https://www.conventionalcommits.org/zh-hans/v1.0.0-beta.4/" target="_blank" rel="noreferrer">约定式提交</a></li><li><a href="https://feflowjs.com/zh/" target="_blank" rel="noreferrer">feflow</a></li><li><a href="https://zj-git-guide.readthedocs.io/zh_CN/latest/message/Angular%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF%E8%A7%84%E8%8C%83/" target="_blank" rel="noreferrer">Angular提交信息规范</a></li></ul>`,99);function i(F,D,y,m,b,u){const a=n("Reward"),l=n("Gitalk");return c(),e("div",null,[r,s(a),s(l)])}const C=p(t,[["render",i]]);export{h as __pageData,C as default};
